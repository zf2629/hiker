海阔视界规则分享，当前分享的是：小程序￥home_rule_v2￥base64://@一级动态分类改@eyJmaXJzdEhlYWRlciI6ImNsYXNzIiwibGFzdF9jaGFwdGVyX3J1bGUiOiIiLCJ0aXRsZSI6IuS4gOe6p+WKqOaAgeWIhuexu+aUuSIsImF1dGhvciI6InpldGFscGhhIiwidXJsIjoiaGlrZXI6Ly9lbXB0eSMjZnlwYWdlIiwidmVyc2lvbiI6MywiY29sX3R5cGUiOiJtb3ZpZV8zIiwiY2xhc3NfbmFtZSI6IiIsInR5cGUiOiJ2aWRlbyIsImNsYXNzX3VybCI6IiIsImFyZWFfbmFtZSI6IiIsImFyZWFfdXJsIjoiIiwic29ydF9uYW1lIjoiIiwieWVhcl9uYW1lIjoiIiwic29ydF91cmwiOiIiLCJ5ZWFyX3VybCI6IiIsImZpbmRfcnVsZSI6ImpzOlxudmFyIGQ9W107XG5jb25zdCBwYWdlID0gTVlfUEFHRTtcbmFkZExpc3RlbmVyKFwib25DbG9zZVwiLFxuICAkLnRvU3RyaW5nKCgpID0+IHtcbiAgICBjbGVhck15VmFyKCdtb2RlJyk7XG4gIH0pXG4pO1xuaWYgKHBhZ2UgPT0gMSkge1xuICAgIGQucHVzaCh7Y29sX3R5cGU6ICdsaW5lJ30pO1xuICAgZC5wdXNoKHtcbiBjb2xfdHlwZTogXCJhdmF0YXJcIixcbiBpbWc6J2h0dHBzOi8vZ2hwcm94eS5uZXQvaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2xzMTI1NzgxMDAzL3R1Ymlhby9tYWluL21lc3N5LzExMy5zdmcnLFxuIHRpdGxlOifkuoznuqforr7nva4nLFxuIHVybDpcImhpa2VyOi8vcGFnZS9lcmppP3J1bGU9XCIrIE1ZX1JVTEUudGl0bGUsXG59KTtcbmQucHVzaCh7Y29sX3R5cGU6ICdsaW5lJ30pO1xuZC5wdXNoKHtcbiBjb2xfdHlwZTogXCJ0ZXh0X2ljb25cIixcbiB0aXRsZTon6L6T5YWl5a6M5q+V5LmL5ZCO6KaB54K55Ye75LiA5LiL5Y+z6L6557u/6Imy6YOo5YiGJyxcbiBpbWc6J2h0dHBzOi8vZ2hwcm94eS5uZXQvaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2xzMTI1NzgxMDAzL3R1Ymlhby9tYWluL3N5c3RlbS83LnBuZycsXG4gdXJsOidoaWtlcjovL2VtcHR5Jyxcbn0pO1xuICBkLnB1c2goe1xuICAgIHRpdGxlOiAnXFx0JyArIGdldE15VmFyKCfmipjlj6DnirbmgIEnLCAn5bGV5byAJyksXG4gICAgaW1nOiBnZXRNeVZhcign5oqY5Y+g54q25oCBJywgJ+WxleW8gCcpID09ICflsZXlvIAnID8gJ2h0dHBzOi8vZ2hwcm94eS5uZXQvaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2xzMTI1NzgxMDAzL3R1Ymlhby9tYWluL3N5c3RlbS8yLnBuZycgOiAnaHR0cHM6Ly9naHByb3h5Lm5ldC9odHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbHMxMjU3ODEwMDMvdHViaWFvL21haW4vc3lzdGVtLzEucG5nJyxcbiAgICBjb2xfdHlwZTogJ3RleHRfaWNvbicsXG4gICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKCh0KSA9PiB7XG4gICAgICB2YXIgc3QgPSBnZXRNeVZhcign5oqY5Y+g54q25oCBJywgJ+WxleW8gCcpO1xuICAgICAgaWYgKHN0ID09IFwi5bGV5byAXCIpIHtcbiAgICAgICAgcHV0TXlWYXIoJ+aKmOWPoOeKtuaAgScsICfmipjlj6AnKTtcbiAgICAgICAgdmFyIGNsc3ggPSBmaW5kSXRlbXNCeUNscyh0KydPcHRpb25zJyk7XG4gICAgICAgIHN0b3JhZ2UwLnB1dE15VmFyKCdjbHN4JywgY2xzeCk7XG4gICAgICAgIGRlbGV0ZUl0ZW1CeUNscyh0KydPcHRpb25zJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdXRNeVZhcign5oqY5Y+g54q25oCBJywgJ+WxleW8gCcpO1xuICAgICAgICB2YXIgY2xzeCA9IHN0b3JhZ2UwLmdldE15VmFyKCdjbHN4JywgW10pLm1hcCh4ID0+IHtcbiAgICAgICAgICB4Wydjb2xfdHlwZSddID0geFsnY29sX3R5cGUnXSA/IHhbJ2NvbF90eXBlJ10gOiB4Wyd0eXBlJ107XG4gICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH0pO1xuICAgICAgICBhZGRJdGVtQWZ0ZXIodCsnYWRkcmVzJywgY2xzeCk7XG4gICAgICB9XG4gICAgICB1cGRhdGVJdGVtKHQrJ2V4cCcsIHtcbiAgICAgICAgdGl0bGU6ICdcXHQnICsgZ2V0TXlWYXIoJ+aKmOWPoOeKtuaAgScsICflsZXlvIAnKSxcbiAgICAgICAgaW1nOiBnZXRNeVZhcign5oqY5Y+g54q25oCBJywgJ+WxleW8gCcpID09ICflsZXlvIAnID8gJ2h0dHBzOi8vZ2hwcm94eS5uZXQvaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2xzMTI1NzgxMDAzL3R1Ymlhby9tYWluL3N5c3RlbS8yLnBuZycgOiAnaHR0cHM6Ly9naHByb3h5Lm5ldC9odHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbHMxMjU3ODEwMDMvdHViaWFvL21haW4vc3lzdGVtLzEucG5nJyxcbiAgICAgIH0pXG5cbiAgICAgIC8vcmVmcmVzaFBhZ2UoKTtcbiAgICAgIHJldHVybiAnaGlrZXI6Ly9lbXB0eSc7XG4gICAgfSxNWV9SVUxFLnRpdGxlKSxcbiAgICBleHRyYToge1xuICAgICAgaWQ6TVlfUlVMRS50aXRsZSsnZXhwJyxcbiAgICB9XG4gIH0pXG5cbiAgdmFyIHN0ID0gZ2V0TXlWYXIoJ+aKmOWPoOeKtuaAgScsICflsZXlvIAnKTtcblxuICBkLnB1c2goe1xuICAgIHRpdGxlOiAn572R5Z2AJyxcbiAgICBjb2xfdHlwZTogJ2lucHV0JyxcbiAgICB1cmw6ICQudG9TdHJpbmcoKHBhZ2UpID0+IHtcbiAgICAgIHRvYXN0KCfliqDovb3nvZHpobXkuK0uLi4nKTtcbiAgICAgIHZhciB1cmwgPSBpbnB1dC5yZXBsYWNlKCdmeXBhZ2UnLCBwYWdlKVxuICAgICAgdmFyIGh0bWwgPSBmZXRjaCh1cmwpO1xuICAgICAgcHV0TXlWYXIoJ2h0bWwnLCBodG1sKTtcbiAgICAgIHNldEl0ZW0oJ3VybCcsIHVybCk7XG4gICAgICBwdXRNeVZhcigndXJsJywgdXJsKTtcbiAgICAgIFxuICAgICAgY2xlYXJNeVZhcihcImhlYWQuY2F0ZVwiKVxuICAgICAgdG9hc3QodXJsKTtcbiAgICAgIHJlZnJlc2hQYWdlKCk7XG4gICAgfSwgcGFnZSksXG4gICAgZXh0cmE6IHtcbiAgICAgIGlkOiBNWV9SVUxFLnRpdGxlKydhZGRyZXMnLFxuICAgICAgb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge3B1dE15VmFyKFwidXJsXCIsIGlucHV0KTsgfSksXG4gICAgICBkZWZhdWx0VmFsdWU6IGdldE15VmFyKFwidXJsXCIsIFwiXCIpICxcbiAgICAgIC8vZGVmYXVsdFZhbHVlOiBnZXRJdGVtKCd1cmwnLCBcIlwiKSxcbiAgICAgLy8gb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge3B1dE15VmFyKCd1cmwnLCBpbnB1dCkgIH0pXG4gICAgfVxuICB9KVxufVxuXG5cbmxldCBodG1sID0gZ2V0TXlWYXIoXCJodG1sXCIsIFwiXCIpO1xubGV0IHVybCA9IGdldEl0ZW0oJ3VybCcsIFwiXCIpO1xuXG5cbnZhciDlrprkuYkgPSB7XG4gIOWIhuexu+minOiJsjogeyB2YWx1ZTogZ2V0TXlWYXIoJ+WIhuexu+minOiJsicsICdyZWQnKSB9LFxuICDlpKfnsbvlrprkvY06IHsgdmFsdWU6IGdldE15VmFyKCflpKfnsbvlrprkvY0nLCAnJykgfSxcbiAg5ou85o6l5YiG57G7OiB7IHZhbHVlOiBnZXRNeVZhcign5ou85o6l5YiG57G7JywgJycpLGRlc2M6J+WkmuS4quaMieaMiTvpmpTlvIAnIH0sXG4gIOWwj+exu+WumuS9jTogeyB2YWx1ZTogZ2V0TXlWYXIoJ+Wwj+exu+WumuS9jScsICdib2R5JiZhOm5vdCg6bWF0Y2hlcyjpppbpobUpKScpIH0sXG4gIOWIhuexu+agh+mimDogeyB2YWx1ZTogZ2V0TXlWYXIoJ+WIhuexu+agh+mimCcsICdhJiZUZXh0JykgfSxcbiAg5YiG57G76ZO+5o6lOiB7IHZhbHVlOiBnZXRNeVZhcign5YiG57G76ZO+5o6lJywgJ2EmJmhyZWYnKSB9LFxuICDkuIDnuqfliIbnsbvlpITnkIY6IHtcbiAgICB2YWx1ZTogZ2V0TXlWYXIoXCLkuIDnuqfliIbnsbvlpITnkIZcIiwgJC50b1N0cmluZygoKSA9PiB7XG4gICAgICBsZXQgdSA9IGlucHV0O1xuICAgICAgLy9sb2codSk7XG4gICAgICByZXR1cm4gdTtcbiAgICB9KSlcbiAgfVxufVxuXG52YXIgb3B0cyA9IFtdO1xuaWYgKHBhZ2UgPT0gMSkge1xuICBPYmplY3QuZW50cmllcyjlrprkuYkpLmZvckVhY2goZnVuY3Rpb24gKFtrZXksIG9ial0pIHtcbiAgICBpZiAoa2V5ID09IFwi5LiA57qn5YiG57G75aSE55CGXCIpIHtcbiAgICAgIGtleSA9IFwi5LiA57qn5aSE55CGXCI7XG4gICAgfVxuXG4gICAgb3B0cy5wdXNoKHtcbiAgICAgIHRpdGxlOiBrZXksXG4gICAgICBjb2xfdHlwZTogJ2lucHV0JyxcbiAgICAgIGRlc2M6IG9iai5kZXNjLFxuICAgICAgdXJsOiAkLnRvU3RyaW5nKChrZXkpID0+IHtcbiAgICAgICAgaWYgKCFpbnB1dCAmJiBrZXkgIT0gJ+aLvOaOpeWIhuexuycpIHJldHVybiAndG9hc3Q6Ly/ovpPlhaXkuLrnqbonO1xuICAgICAgICBpZiAoa2V5ID09IFwi5LiA57qn5aSE55CGXCIpIHtcbiAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09IFwi5YiG57G76aKc6ImyXCIpIHtcbiAgICAgICAgICBsZXQgYWxsX2NvbHMgPSBbJzrpmo/mnLrpopzoibInXVxuICAgICAgICAgIGFsbF9jb2xzLnVuc2hpZnQoJ+W9k+WJjScgKyAnOicgKyBpbnB1dClcbiAgICAgICAgICByZXR1cm4gJChhbGxfY29scywgMSwgJ+WIhuexu+minOiJsicpLnNlbGVjdCgoKSA9PiB7XG4gICAgICAgICAgICB2YXIgciA9IGlucHV0LnNwbGl0KCc6JylbMV07XG4gICAgICAgICAgICBwdXRNeVZhcign5YiG57G76aKc6ImyJywgcik7XG4gICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gJ2hpa2VyOi8vZW1wdHknXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHB1dE15VmFyKGtleSwgaW5wdXQpO1xuICAgICAgICByZWZyZXNoUGFnZSgpXG4gICAgICAgIHJldHVybiAndG9hc3Q6Ly8nICsga2V5ICsgXCI6XCIgKyBpbnB1dDtcbiAgICAgIH0sIGtleSksXG4gICAgICBleHRyYToge1xuICAgICAgICBvbkNoYW5nZTokLnRvU3RyaW5nKChrKT0+e1xuICAgICAgICAgIGlmKGs9PSfkuIDnuqflpITnkIYnKXtcbiAgICAgICAgICAgIHB1dE15VmFyKCfkuIDnuqfliIbnsbvlpITnkIYnLGlucHV0KVxuICAgICAgICAgIH1cbiAgICAgICAgfSxrZXkpLFxuICAgICAgICBjbHM6IE1ZX1JVTEUudGl0bGUrJ09wdGlvbnMnLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IG9iai52YWx1ZSxcbiAgICAgICAgaGlnaGxpZ2h0OiBrZXk9PSfkuIDnuqflpITnkIYnP3RydWU6ZmFsc2UsXG4gICAgICAgIHR5cGU6ICd0ZXh0YXJlYScsXG4gICAgICAgIGhlaWdodDogLTEsXG4gICAgICB9XG4gICAgfSlcbiAgfSk7XG59XG5cbmlmIChzdCA9PSBcIuWxleW8gFwiKSB7XG4gIGQgPSBkLmNvbmNhdChvcHRzKTtcbn0gZWxzZSB7XG4gIHN0b3JhZ2UwLnB1dE15VmFyKCdjbHN4Jywgb3B0cyk7XG59XG5cbmlmIChwYWdlID09IDEpIHtcbiAgZC5wdXNoKHtcbiAgICB0aXRsZTogJ+WIl+ihqOinhOWImScsXG4gICAgZGVzYzogJ+WIl+ihqCDmoIfpopgg5Zu+54mHIOaPj+i/sCDpk77mjqUgO+WPt+malOW8gCcsXG4gICAgY29sX3R5cGU6ICdpbnB1dCcsXG4gICAgdXJsOiAkLnRvU3RyaW5nKCgpID0+IHtcbiAgICAgIGlmICghaW5wdXQpIHJldHVybiAndG9hc3Q6Ly/ovpPlhaXkuLrnqbonO1xuICAgICAgc3RvcmFnZTAucHV0TXlWYXIoXCJsaXN0c1wiLCBpbnB1dClcbiAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcbiAgICAgIHJldHVybiAndG9hc3Q6Ly8nICsgaW5wdXQ7XG4gICAgfSksXG4gICAgZXh0cmE6IHtcbiAgICAgIGRlZmF1bHRWYWx1ZTogc3RvcmFnZTAuZ2V0TXlWYXIoXCJsaXN0c1wiLCBcIlwiKSxcbiAgICAgIHR5cGU6ICd0ZXh0YXJlYScsXG4gICAgICBoZWlnaHQ6IC0xLFxuICAgIH1cbiAgfSwge1xuICAgIHRpdGxlOiAn5LiL5LiA6aG1JyxcbiAgICBkZXNjOiAn5LiL5LiA6aG1cGTmiJbogIVwZGZoJyxcbiAgICBjb2xfdHlwZTogJ2lucHV0JyxcbiAgICB1cmw6ICQudG9TdHJpbmcoKCkgPT4ge1xuICAgICAgbGV0IGFsbF9jb2xzID0gWyfnqbo6OicsICfkvosxOjpwZChodG1sLFwiYTptYXRjaGVzKOS4i1vkuIBdP+mhtSkmJmhyZWZcIiknLCAn5L6LMjo6cGQoaHRtbCxcImE6bWF0Y2hlcyg+KSYmaHJlZlwiKScsJ+S+izM6OnBkKGh0bWwsXCJhW3RpdGxlPeS4i+S4gOmhtV0mJmhyZWZcIiknXTtcbiAgICAgIGFsbF9jb2xzLnVuc2hpZnQoJ+W9k+WJjScgKyAnOjonICsgaW5wdXQpXG4gICAgICByZXR1cm4gJChhbGxfY29scywgMSwgJ+S4i+S4gOmhteinhOWImScpLnNlbGVjdCgoKSA9PiB7XG4gICAgICAgIHZhciByID0gaW5wdXQuc3BsaXQoJzo6JylbMV07XG4gICAgICAgIGxvZyhyKVxuICAgICAgICBzdG9yYWdlMC5wdXRNeVZhcign5LiL5LiA6aG1Jywgcik7XG4gICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuICdoaWtlcjovL2VtcHR5J1xuICAgICAgfSlcbiAgICB9KSxcbiAgICBleHRyYToge1xuICAgICAgZGVmYXVsdFZhbHVlOiBzdG9yYWdlMC5nZXRNeVZhcihcIuS4i+S4gOmhtVwiLCBcIlwiKSxcbiAgICAgIHR5cGU6ICd0ZXh0YXJlYScsXG4gICAgICBoZWlnaHQ6IC0xLFxuICAgIH1cbiAgfSlcbn1cblxuXG5mb3IgKHZhciBwcm9wTmFtZSBpbiDlrprkuYkpIHtcbiAgZXZhbCgndmFyICcgKyBwcm9wTmFtZSArICcgPSDlrprkuYlbcHJvcE5hbWVdW1widmFsdWVcIl07Jyk7XG59XG5cbnZhciBnZXRSYW5nZUNvbG9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICcjJyArICgnMDAwMDAnICsgKE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDAgPDwgMCkudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTYpO1xufVxuXG5pZiAo5YiG57G76aKc6ImyID09IFwi6ZqP5py66aKc6ImyXCIpIHtcbiAg5YiG57G76aKc6ImyID0gZ2V0UmFuZ2VDb2xvcnMoKTtcbn1cblxuaWYgKHBhZ2UgPT0gMSkge1xuICBkLnB1c2goe1xuICAgIHRpdGxlOiAn6aKE6KeIJyxcbiAgICBjb2xfdHlwZTogJ2ZsZXhfYnV0dG9uJyxcbiAgICB1cmw6ICQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKCkgPT4ge1xuICAgICAgcHV0TXlWYXIoJ+aKmOWPoOeKtuaAgScsICfmipjlj6AnKTtcbiAgICAgIHB1dE15VmFyKCdtb2RlJywgJ1ByZScpO1xuICAgICAgY2xlYXJNeVZhcigneWlfZmlyc3RwYWdlJyk7XG4gICAgICBjbGVhck15VmFyKE1ZX1JVTEUudXJsKTtcbiAgICAgIGNsZWFyTXlWYXIoXCJoZWFkLmNhdGVcIik7XG4gICAgICByZWZyZXNoUGFnZSgpXG4gICAgICByZXR1cm4gJ3RvYXN0Oi8v6aKE6KeIJ1xuICAgIH0pXG4gIH0sIHtcbiAgICB0aXRsZTogJ+WPlua2iCcsXG4gICAgY29sX3R5cGU6ICdmbGV4X2J1dHRvbicsXG4gICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKCgpID0+IHtcbiAgICAgIGNsZWFyTXlWYXIoJ21vZGUnKVxuICAgICAgcmVmcmVzaFBhZ2UoKVxuICAgICAgcmV0dXJuICd0b2FzdDovL+WPlua2iOmihOiniCdcbiAgICB9KVxuICB9LHtcbiAgICB0aXRsZTon5YiX6KGoJyxcbiAgICBjb2xfdHlwZTonZmxleF9idXR0b24nLFxuICAgIHVybDokKCdoaWtlcjovL2VtcHR5IyMnKS5ydWxlKCgpPT57XG4gICAgICBhZGRMaXN0ZW5lcihcIm9uQ2xvc2VcIixcbiAgICAgICAkLnRvU3RyaW5nKCgpID0+IHtcbiAgICAgICAgIGNsZWFyTXlWYXIoJ2xpc3RpJyk7XG4gICAgICAgICAvL3JlZnJlc2hQYWdlKCk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgXG4gICAgICB2YXIgZD1bXTtcbiAgICAgIHZhciBybGlzdD1bXTtcbiAgICAgIGQucHVzaCh7XG4gICAgICAgIHRpdGxlOifnoa7orqTkv67mlLnlubbov5Tlm54nLFxuICAgICAgICBpbWc6J2h0dHBzOi8vaGlrZXJmYW5zLmNvbS90dWJpYW8vbWVzc3kvMTc5LnN2ZycsXG4gICAgICAgIHVybDokKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKCgpPT57XG4gICAgICAgICAgYmFjayh0cnVlKTtcbiAgICAgICAgICByZXR1cm4gJ2hpa2VyOi8vZW1wdHknO1xuICAgICAgICB9KSxcbiAgICAgICAgY29sX3R5cGU6J2F2YXRhcicsXG4gICAgICB9KVxuICAgICAgdmFyIGxpc3RydWxlID0gc3RvcmFnZTAuZ2V0TXlWYXIoXCJsaXN0c1wiLCBcIlwiKTtcblx0ICAgIFxuICAgICAgaWYgKGxpc3RydWxlICE9IFwiXCIgJiYgbGlzdHJ1bGUuaW5jbHVkZXMoXCI7XCIpKXtcbiAgICAgICAgcmxpc3QgPSBsaXN0cnVsZS5zcGxpdCgnOycpO1xuICAgICAgfVxuXHQgIGxvZyhybGlzdCk7XG4gICAgICB2YXIgbGlzdHVybD1nZXRNeVZhcignbGlzdHVybCcsJycpO1xuICAgICAgdmFyIHVybD1nZXRNeVZhcigndXJsJywgJycpO1xuICAgICAgaWYobGlzdHVybCE9Jycpe1xuICAgICAgICB1cmw9bGlzdHVybDtcbiAgICAgIH1cbiAgICAgIE1ZX1VSTD11cmw7XG4gICAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTon572R5Z2AJyxcbiAgICAgICAgY29sX3R5cGU6J2lucHV0JyxcbiAgICAgICAgdXJsOiQudG9TdHJpbmcoKCk9PntcbiAgICAgICAgICB0b2FzdCgn6I635Y+W572R6aG15LitLi4uJyk7XG4gICAgICAgICAgdmFyIGh0bWw9ZmV0Y2goaW5wdXQpO1xuICAgICAgICAgIHB1dE15VmFyKCdsaXN0dXJsJyxpbnB1dCk7XG4gICAgICAgICAgcHV0TXlWYXIoJ2xpc3RodG1sJyxodG1sKTtcbiAgICAgICAgICByZWZyZXNoUGFnZSgpO1xuICAgICAgICAgIHJldHVybiBcImhpa2VyOi8vZW1wdHlcIjtcbiAgICAgICAgfSksXG4gICAgICAgIGV4dHJhOntcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6dXJsLFxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgdmFyIGh0bWw9Z2V0TXlWYXIoJ2h0bWwnLCcnKTtcbiAgICAgIHZhciBsaXN0aHRtbD1nZXRNeVZhcignbGlzdGh0bWwnLCcnKTtcbiAgICAgIGlmKGh0bWw9PScnJiZsaXN0aHRtbD09Jycpe1xuICAgICAgICBodG1sPWZldGNoKHVybCk7XG4gICAgICAgIHRvYXN0KCfojrflj5bnvZHpobXkuK0uLi4nKTtcbiAgICAgICAgcHV0TXlWYXIoJ2xpc3RodG1sJyxodG1sKTtcbiAgICAgIH1lbHNlIGlmKGxpc3RodG1sIT0nJyl7XG4gICAgICAgIGh0bWw9bGlzdGh0bWw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHZhciB0cz1bJ+WIl+ihqCcsJ+agh+mimCcsJ+WbvueJhycsJ+aPj+i/sCcsJ+mTvuaOpSddO1xuICAgICAgdHMuZm9yRWFjaCgoaXRlbSxpKT0+e1xuICAgICAgICBkLnB1c2goe1xuICAgICAgICAgIHRpdGxlOml0ZW0sXG4gICAgICAgICAgY29sX3R5cGU6J2lucHV0JyxcbiAgICAgICAgICB1cmw6JC50b1N0cmluZygodHMscmwsaSk9PntcbiAgICAgICAgICAgIHJsW2ldPWlucHV0O1xuICAgICAgICAgICAgc3RvcmFnZTAucHV0TXlWYXIoXCJsaXN0c1wiLCBybC5qb2luKCc7JykpO1xuICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuICd0b2FzdDovLycrdHNbaV0rJzonK2lucHV0O1xuICAgICAgICAgIH0sdHMscmxpc3QsaSksXG4gICAgICAgICAgZXh0cmE6e1xuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOnJsaXN0W2ldXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgdmFyIGxpc3QgPSBwZGZhKGh0bWwsIHJsaXN0WzBdKTtcbiAgICAgIHZhciBpbmRleD1nZXRNeVZhcignbGlzdGknLCcnKTtcbiAgICAgIFxuICAgICAgaWYoaW5kZXghPScnKXtcbiAgICAgICAgdmFyIHRzb2JqPXtcbiAgICAgICAgIHRpdGxlOnBkZmgobGlzdFtpbmRleF0scmxpc3RbMV0pLFxuICAgICAgICAgZGVzYzpwZGZoKGxpc3RbaW5kZXhdLHJsaXN0WzNdKSxcbiAgICAgICAgIGltZzpwZChsaXN0W2luZGV4XSxybGlzdFsyXSkrJ0BSZWZlcmVyPScsXG4gICAgICAgICB1cmw6cGQobGlzdFtpbmRleF0scmxpc3RbNF0pLFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBkLnB1c2goe1xuICAgICAgICAgIHRpdGxlOnRzb2JqLnRpdGxlLFxuICAgICAgICAgIGRlc2M6dHNvYmouZGVzYyxcbiAgICAgICAgICBpbWc6dHNvYmouaW1nLFxuICAgICAgICAgIHVybDp0c29iai51cmwsXG4gICAgICAgICAgY29sX3R5cGU6J21vdmllXzFfdmVydGljYWxfcGljJyxcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgZGVzYzon6LCD6K+V56qX5Y+jJyxcbiAgICAgICAgICBjb2xfdHlwZTonaW5wdXQnLFxuICAgICAgICAgIGV4dHJhOntcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTpsaXN0W2luZGV4XSxcbiAgICAgICAgICAgIHRpdGxlVmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICB0eXBlOid0ZXh0YXJlYScsXG4gICAgICAgICAgICBoaWdobGlnaHQ6IHRydWUsXG4gICAgICAgICAgICBoZWlnaHQ6LTEsXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICBkLnB1c2goe1xuICAgICAgICAgIHRpdGxlOifigJzigJzigJ3igJ0nKyhpbmRleD09Jyc/J0FsbCcuZm9udGNvbG9yKCcjM0NCMzcxJyk6J0FsbCcpLFxuICAgICAgICAgIGNvbF90eXBlOidmbGV4X2J1dHRvbicsXG4gICAgICAgICAgdXJsOiQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKCk9PntcbiAgICAgICAgICAgIGNsZWFyTXlWYXIoJ2xpc3RpJyk7XG4gICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XG4gICAgICAgICAgICBzZXRQYWdlVGl0bGUoJ+WFqOmDqCcpO1xuICAgICAgICAgICAgcmV0dXJuICd0b2FzdDovL+WFqOmDqCc7XG4gICAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGxpc3QuZm9yRWFjaCgoaXRlbSxpKT0+e1xuICAgICAgICBkLnB1c2goe1xuICAgICAgICAgIHRpdGxlOifigJzigJzigJ3igJ0nKyhpbmRleCE9JycmJnBhcnNlSW50KGluZGV4KT09aT8oaSsnJykuZm9udGNvbG9yKCcjM0NCMzcxJyk6aSksXG4gICAgICAgICAgY29sX3R5cGU6J2ZsZXhfYnV0dG9uJyxcbiAgICAgICAgICB1cmw6JCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgoaSk9PntcbiAgICAgICAgICAgIHB1dE15VmFyKCdsaXN0aScsaSsnJyk7XG4gICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XG4gICAgICAgICAgICBzZXRQYWdlVGl0bGUoJ+esrCcraSsn5LiqJyk7XG4gICAgICAgICAgICByZXR1cm4gJ3RvYXN0Oi8v5b2T5YmN6LCD6K+V56ysJytpKyfkuKonO1xuICAgICAgICAgIH0saSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmKGluZGV4PT0nJyl7XG4gICAgICBmb3IgKHZhciBpIGluIGxpc3QpIHtcbiAgICAgIHZhciBpbWcgPSBwZChsaXN0W2ldLCBybGlzdFsyXSkgKyBcIkBSZWZlcmVyPVwiO1xuICAgICAgICBkLnB1c2goe1xuICAgICAgICAgdGl0bGU6IHBkZmgobGlzdFtpXSwgcmxpc3RbMV0pLFxuICAgICAgICAgaW1nOiBpbWcsXG4gICAgICAgICBkZXNjOiBwZGZoKGxpc3RbaV0sIHJsaXN0WzNdKSxcbiAgICAgICAgIHVybDogcGQobGlzdFtpXSwgcmxpc3RbNF0pLFxuICAgICAgICAgZXh0cmE6IHtcbiAgICAgICAgICAgaW1nOiBpbWdcbiAgICAgICAgICB9XG4gICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgfSBcbiAgICAgIFxuICAgICAgc2V0UmVzdWx0KGQpO1xuICAgIH0pLFxuICB9LCB7XG4gICAgdGl0bGU6ICfnlJ/miJAnLFxuICAgIGNvbF90eXBlOiAnZmxleF9idXR0b24nLFxuICAgIHVybDogJCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgoKSA9PiB7XG4gICAgICB2YXIg5aSE55CGID0gZ2V0TXlWYXIoJ+S4gOe6p+WIhuexu+WkhOeQhicsICcnKTtcbiAgICAgIOWkhOeQhiA9IOWkhOeQhi5yZXBsYWNlKC9bXFxyXFxuXShcXChcXCkpLywgJyQxJykucmVwbGFjZSgvW1xcclxcbl1cXClcXChcXCkkL20sIFwiKVwiKTtcbiAgICAgIHZhciBsaXN0ID0gXCJcIjtcbiAgICAgIHZhciBsaXN0cnVsZSA9IHN0b3JhZ2UwLmdldE15VmFyKFwibGlzdHNcIiwgXCJcIik7XG4gICAgICBpZiAobGlzdHJ1bGUgIT0gXCJcIiAmJiBsaXN0cnVsZS5pbmNsdWRlcyhcIjtcIikpIHtcbiAgICAgICAgdmFyIHJsaXN0ID0gbGlzdHJ1bGUuc3BsaXQoJzsnKTtcbiAgICAgICAgdmFyIGxpc3QgPSBgXG52YXIgbGlzdCA9IHBkZmEoaHRtbCxcIiR7cmxpc3RbMF19XCIpO1xuZm9yICh2YXIgaSBpbiBsaXN0KSB7XG4gIHZhciBpbWcgPSBwZChsaXN0W2ldLCBcIiR7cmxpc3RbMl19XCIpICsgXCJAUmVmZXJlcj1cIjtcbiAgZC5wdXNoKHtcbiAgICAgIHRpdGxlOiBwZGZoKGxpc3RbaV0sIFwiJHtybGlzdFsxXX1cIiksXG4gICAgICBpbWc6IGltZyxcbiAgICAgIGRlc2M6IHBkZmgobGlzdFtpXSwgXCIke3JsaXN0WzNdfVwiKSxcbiAgICAgIHVybDogXCJoaWtlcjovL3BhZ2UvZGV0YWlsI2ltbWVyc2l2ZVRoZW1lIyNhdXRvQ2FjaGUjP2FjdHVhbF91cmw9XCIrcGQobGlzdFtpXSwgXCIke3JsaXN0WzRdfVwiKSxcbiAgICAgIGV4dHJhOiB7XG4gICAgICAgIGltZzogaW1nLFxuXHRcdCAgZGF0YTogeyBidDrmoIfpopgsbXM65o+P6L+wLHRwOuWbvueJhyxqajrnroDku4sseGxsYjrnur/ot6/liJfooagseGxsYm1jOue6v+i3r+WIl+ihqOWQjeensCxiZmxiOuaSreaUvuWIl+ihqCxiZmxibWM65pKt5pS+5YiX6KGo5ZCN56ewLGJxOnVybF9wcmVmaXh9LFxuICAgICAgfVxuICAgIH0pXG4gIH1gXG4gICAgICB9XG4gICAgICB2YXIgdHJ1ZXVybCA9IFwiXCI7XG4gICAgICB2YXIgYXV0byA9IFwiXCI7XG4gICAgICB2YXIgbmV4dCA9IFwiXCI7XG4gICAgICBpZiAoZ2V0TXlWYXIoXCLkuIvkuIDpobVcIiwgXCJcIikgIT0gXCJcIikge1xuICAgICAgICB0cnVldXJsID0gYGV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2UvYXV0b1BhZ2UnKSkucnVsZSk7IFxubGV0IHRydWVfdXJsID0gZ2V0VHJ1ZWxpbmsoTVlfUlVMRS51cmwsIE1ZX1VSTCxwYWdlKTtgXG4gICAgICAgIGF1dG8gPSBcImF1dG9QYWdlKCk7XCJcbiAgICAgICAgbmV4dCA9IGBjb25zdCDkuIvkuIDpobU9JyR7Z2V0TXlWYXIoXCLkuIvkuIDpobVcIiwgXCJcIil9JztgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnVldXJsID0gXCJsZXQgdHJ1ZV91cmwgPSBnZXRNeVZhcihNWV9SVUxFLnVybCwgTVlfVVJMKTtcIlxuICAgICAgfVxuICAgICAgdmFyIGNvbG9yID0gYCR7Z2V0TXlWYXIoJ+WIhuexu+minOiJsicsICdyZWQnKX1gXG4gICAgICBpZiAoY29sb3IgPT0gXCLpmo/mnLrpopzoibJcIikge1xuICAgICAgICBjb2xvciA9IGBnZXRSYW5nZUNvbG9ycygpYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbG9yID0gYFwiJHtnZXRNeVZhcign5YiG57G76aKc6ImyJywgJ3JlZCcpfVwiYFxuICAgICAgfVxuXG4gICAgICB2YXIgc3RyID0gYGpzOlxudmFyIGQgPSBbXTtcbnZhciBnZXRSYW5nZUNvbG9ycyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gJyMnICsgKCcwMDAwMCcgKyAoTWF0aC5yYW5kb20oKSAqIDB4MTAwMDAwMCA8PCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XG59XG5jb25zdCBwYWdlID0gTVlfUEFHRTtcbmNvbnN0IOWIhuexu+minOiJsiA9ICR7Y29sb3J9O1xuY29uc3Qg5aSn57G75a6a5L2NID0gXCIke2dldE15VmFyKCflpKfnsbvlrprkvY0nLCAnJyl9XCI7XG5jb25zdCDmi7zmjqXliIbnsbsgPSBcIiR7Z2V0TXlWYXIoJ+aLvOaOpeWIhuexuycsICcnKX1cIjtcbmNvbnN0IOWwj+exu+WumuS9jSA9IFwiJHtnZXRNeVZhcign5bCP57G75a6a5L2NJywgJ2JvZHkmJmE6bm90KDptYXRjaGVzKOmmlumhtSkpJyl9XCI7XG5jb25zdCDliIbnsbvmoIfpopggPSBcIiR7Z2V0TXlWYXIoJ+WIhuexu+agh+mimCcsICdhJiZUZXh0Jyl9XCI7XG5jb25zdCDliIbnsbvpk77mjqUgPSBcIiR7Z2V0TXlWYXIoJ+WIhuexu+mTvuaOpScsICdhJiZocmVmJyl9XCI7XG5jb25zdCDkuIDnuqfliIbnsbvlpITnkIYgPSAkLnRvU3RyaW5nJHvlpITnkIZ9O1xuY29uc3Qg5qCH6aKYID0gJyR7Z2V0TXlWYXIoJ3IzJywgJycpfSc7XG5jb25zdCDmj4/ov7AgPSBcIiR7Z2V0TXlWYXIoJ3I0JywgJycpfVwiO1xuY29uc3Qg5Zu+54mHID0gXCIke2dldE15VmFyKCdyNScsICcnKX1cIjtcbmNvbnN0IOeugOS7iyA9IFwiJHtnZXRNeVZhcigncjYnLCAnJyl9XCI7XG5jb25zdCDnur/ot6/liJfooaggPSBcIiR7Z2V0TXlWYXIoJ3I3JywgJycpfVwiO1xuY29uc3Qg57q/6Lev5YiX6KGo5ZCN56ewID0gXCIke2dldE15VmFyKCdyOCcsICcnKX1cIjtcbmNvbnN0IOaSreaUvuWIl+ihqCA9IFwiJHtnZXRNeVZhcigncjknLCAnJyl9XCI7XG5jb25zdCDmkq3mlL7liJfooajlkI3np7AgPSBcIiR7Z2V0TXlWYXIoJ3IxMCcsICcnKX1cIjtcbmNvbnN0IHVybF9wcmVmaXggPSBcIiR7Z2V0TXlWYXIoJ2JxJywgJycpfVwiO1xuJHtuZXh0fVxuTVlfVVJMID0gTVlfVVJMLnJlcGxhY2UoJ2hpa2VyOi8vZW1wdHkjIycsICcnKTtcbiR7dHJ1ZXVybH1cbmxvZyh0cnVlX3VybCk7XG52YXIgaHRtbD1mZXRjaCh0cnVlX3VybCk7XG5NWV9VUkw9dHJ1ZV91cmw7XG5ldmFsKEpTT04ucGFyc2UocmVxdWVzdCgnaGlrZXI6Ly9wYWdlL2R0ZmwnKSkucnVsZSk7XG4ke2xpc3R9XG4ke2F1dG99XG5zZXRSZXN1bHQoZCk7YFxuICAgICAgdmFyIHJ1bGUgPSBNWV9SVUxFO1xuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgIHZhciB0aW1lID0gYCR7bm93LmdldE1vbnRoKCkgKyAxfS0ke25vdy5nZXREYXRlKCl9YDtcbiAgICAgIHJ1bGUudGl0bGUgPSAn5rWL6K+VJyArIHRpbWU7XG4gICAgICBydWxlLnVybCA9ICdoaWtlcjovL2VtcHR5IyMnICsgZ2V0TXlWYXIoJ3VybCcsICcnKTtcbiAgICAgIGxvZyhydWxlLnVybClcbiAgICAgIHJ1bGUuZmluZF9ydWxlID0gc3RyO1xuICAgICAgcmV0dXJuIFwicnVsZTovL1wiICsgYmFzZTY0RW5jb2RlKFwi5rW36ZiU6KeG55WM77+laG9tZV9ydWxl77+lXCIgKyBKU09OLnN0cmluZ2lmeShydWxlKSk7XG4gICAgfSksXG4gIH0sIHtcbiAgICB0aXRsZTogJ+WIoOmZpCcsXG4gICAgY29sX3R5cGU6ICdmbGV4X2J1dHRvbicsXG4gICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKCgpID0+IHtcbiAgICAgIGxldCBhbGxfY29scyA9IGxpc3RNeVZhcktleXMoKTtcbiAgICAgIGxldCB0aXBzID0gJ+ivt+mAieaLqeWIoOmZpOS4tOaXtuWPmOmHjyAnO1xuICAgICAgcmV0dXJuICQoYWxsX2NvbHMsIDIsIHRpcHMpLnNlbGVjdCgoKSA9PiB7XG4gICAgICAgIGNsZWFyTXlWYXIoaW5wdXQpO1xuICAgICAgICByZWZyZXNoUGFnZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuICd0b2FzdDovL+W3suWIoOmZpOS4tOaXtuWPmOmHjzonICsgaW5wdXQ7XG4gICAgICB9KTtcbiAgICB9KSxcbiAgfSx7XG4gICAgdGl0bGU6IFwi5p2l5Liq56S65L6LXCIsXG4gICAgdXJsOiAkKFwiI25vTG9hZGluZyNcIikubGF6eVJ1bGUoKCkgPT4ge1xuIHB1dE15VmFyKCd1cmwnLCBcImh0dHBzOi8vd3d3Lmxhb2RpZmFuZy50di92b2RzaG93LzEtLS0tLS0tLTEtLS0uaHRtbFwiKTsgICAgICBcbiBwdXRNeVZhcihcIuWkp+exu+WumuS9jVwiLCBcImJvZHkmJi5oZWFkX21lbnVfYVwiKTtcblx0XHRwdXRNeVZhcihcIuaLvOaOpeWIhuexu1wiLCBcImJvZHkmJi53cmFwcGVyX2ZsXCIpO1xuXHRcdHB1dE15VmFyKFwibGlzdHNcIiwgXCJib2R5JiYudm9kbGlzdF9pdGVtO2EmJnRpdGxlO2EmJmRhdGEtb3JpZ2luYWw7LnBpY190ZXh0JiZUZXh0O2EmJmhyZWZcIik7XG5cdFx0XHRyZWZyZXNoUGFnZSgpO1xuICAgICAgICByZXR1cm4gXCJoaWtlcjovL2VtcHR5XCJcbiAgICB9KSxcbiAgICBjb2xfdHlwZTogXCJmbGV4X2J1dHRvblwiLFxuICBcbiAgfSlcbn1cblxudmFyIG1vZGUgPSBnZXRNeVZhcihcIm1vZGVcIiwgXCJcIik7XG5ldmFsKEpTT04ucGFyc2UocmVxdWVzdCgnaGlrZXI6Ly9wYWdlL2F1dG9QYWdlJykpLnJ1bGUpO1xuXG5sZXQg5LiL5LiA6aG1ID0gXCJcIjtcbmlmIChnZXRNeVZhcihcIuS4i+S4gOmhtVwiLCBcIlwiKSAhPSBcIlwiKSB7XG4gIOS4i+S4gOmhtSA9IGdldE15VmFyKFwi5LiL5LiA6aG1XCIsIFwiXCIpXG59XG52YXIg5Yqo5oCB6L+U5ZuePWZhbHNlO1xuLy92YXIg5byA5ZCv5oqY5Y+gPWZhbHNlO1xuXG5sZXQgdHJ1ZV91cmwgPSAnJztcbmlmIChtb2RlID09ICdQcmUnKSB7XG4gIGlmICjkuIvkuIDpobUgIT0gXCJcIikge1xuICAgIHRydWVfdXJsID0gZ2V0VHJ1ZWxpbmsoTVlfUlVMRS51cmwsIHVybCwgcGFnZSk7XG4gIH0gZWxzZSB7XG4gICAgdHJ1ZV91cmwgPSBnZXRNeVZhcihNWV9SVUxFLnVybCwgdXJsKTtcbiAgfVxuICBsb2coJ3RydWVfdXJsOicrdHJ1ZV91cmwpO1xuICBNWV9VUkwgPSB0cnVlX3VybDtcbiAgaHRtbCA9IGZldGNoKHRydWVfdXJsKTtcbn0gZWxzZSB7XG4gIE1ZX1VSTCA9IHVybDtcbn1cbmxvZygnTVlfVVJMOiAnICsgTVlfVVJMKTtcbnRyeSB7XG4gIGlmICjlpKfnsbvlrprkvY0gPT0gJycpIHtcbiAgICB0b2FzdCgn5b2T5YmN5aSn57G75a6a5L2N5Li656m65bCG5LiN5Lya5omn6KGMJylcbiAgfSBlbHNlIHtcbiAgICBldmFsKEpTT04ucGFyc2UocmVxdWVzdCgnaGlrZXI6Ly9wYWdlL2R0ZmwnKSkucnVsZSlcbiAgfVxufSBjYXRjaCAoZSkge1xuICB0b2FzdChlLm1lc3NhZ2UpXG59XG5cbnZhciBsaXN0cnVsZSA9IHN0b3JhZ2UwLmdldE15VmFyKFwibGlzdHNcIiwgXCJcIik7XG5pZiAobGlzdHJ1bGUgIT0gXCJcIiAmJiBsaXN0cnVsZS5pbmNsdWRlcyhcIjtcIikpIHtcbiAgdmFyIHJsaXN0ID0gbGlzdHJ1bGUuc3BsaXQoJzsnKTtcbiAgLy9sb2cocmxpc3QpO1xuICB2YXIgbGlzdCA9IHBkZmEoaHRtbCwgcmxpc3RbMF0pO1xuICBmb3IgKHZhciBpIGluIGxpc3QpIHtcbiAgICB2YXIgaW1nID0gcGQobGlzdFtpXSwgcmxpc3RbMl0pICsgXCJAUmVmZXJlcj1cIjtcbiAgICBkLnB1c2goe1xuICAgICAgdGl0bGU6IHBkZmgobGlzdFtpXSwgcmxpc3RbMV0pLFxuICAgICAgaW1nOiBpbWcsXG4gICAgICBkZXNjOiBwZGZoKGxpc3RbaV0sIHJsaXN0WzNdKSxcblxuICAgICB1cmw6IHBkKGxpc3RbaV0sIHJsaXN0WzRdKSxcbiAgICAgIGV4dHJhOiB7IGltZzogaW1nXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuaWYgKOS4i+S4gOmhtSAhPSBcInVuZGVmaW5lZFwiJibkuIvkuIDpobUhPScnKSB7XG4gIGF1dG9QYWdlKCk7XG59XG5cbnNldFJlc3VsdChkKTsiLCJzZWFyY2hfdXJsIjoiIiwiZ3JvdXAiOiIj77iP4oOj5bel5YW3Iiwic2VhcmNoRmluZCI6IiIsImRldGFpbF9jb2xfdHlwZSI6Im1vdmllXzEiLCJkZXRhaWxfZmluZF9ydWxlIjoiIiwic2RldGFpbF9jb2xfdHlwZSI6Im1vdmllXzEiLCJzZGV0YWlsX2ZpbmRfcnVsZSI6IiIsInVhIjoibW9iaWxlIiwicHJlUnVsZSI6IiIsInBhZ2VzIjoiW3tcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLoh6rliqjkuIvkuIDpobVcIixcInBhdGhcIjpcImF1dG9QYWdlXCIsXCJydWxlXCI6XCJqczpcXG52YXIg54q25oCBID1cXHJcXG50eXBlb2Yg54q25oCB5qCH6K6wICE9IFxcXCJ1bmRlZmluZWRcXFwiICYmIOeKtuaAgeagh+iusCAhPSBcXFwiXFxcIiA/IOeKtuaAgeagh+iusDogTVlfUlVMRS51cmw7XFxuXFxuZnVuY3Rpb24gZ2V0VHJ1ZWxpbmsobWFyaywgdXJsLCBwYWdlKSB7XFxyXFxuICB2YXIgcCA9IGdldE15VmFyKG1hcmssIHVybCkucmVwbGFjZShcXFwiZnlwYWdlXFxcIiwgcGFnZSk7XFxyXFxuICBpZiAocGFnZSA9PSAxKSB7XFxyXFxuICAgIHJldHVybiBnZXRNeVZhcihcXFwieWlfZmlyc3RwYWdlXFxcIiwgcCk7XFxyXFxuICB9IGVsc2UgaWYgKHAgIT0gXFxcIlxcXCIpIHtcXHJcXG4gICAgcmV0dXJuIHA7XFxyXFxuICB9IGVsc2Uge1xcclxcbiAgICByZXR1cm4gdXJsO1xcclxcbiAgfVxcclxcbn1cXG5cXG5mdW5jdGlvbiBhdXRvUGFnZSgpIHtcXHJcXG4gIGlmIChwYWdlID09IDEpIHtcXHJcXG4gICAgcHV0TXlWYXIoXFxcInlpX2ZpcnN0cGFnZVxcXCIsIHRydWVfdXJsKTtcXHJcXG4gIH1cXHJcXG4gIHRyeSB7XFxyXFxuICAgIHZhciBuZXh0ID0gZXZhbCjkuIvkuIDpobUpO1xcclxcbiAgICAvL2xvZyhcXFwibmV4dFxcXCIpO1xcclxcbiAgICAvL2xvZygnbmV4dDonK25leHQpO1xcclxcbiAgfSBjYXRjaCB7XFxyXFxuICAgIGxvZyhcXFwi5Y+v6IO95LiN5a2Y5Zyo5LiL5LiA6aG15oiW6ICF5LiL5LiA6aG15a6a5L2N5pyJ6Zeu6aKYXFxcIik7XFxyXFxuICAgIG5leHQgPSBcXFwiXFxcIjtcXHJcXG4gIH1cXHJcXG4gIGlmIChuZXh0ICE9IFxcXCJcXFwiKSB7XFxyXFxuICAgIHB1dE15VmFyKOeKtuaAgSwgbmV4dCk7XFxyXFxuICB9XFxyXFxufVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5Yqo5oCB5YiG57G75pS5XCIsXCJwYXRoXCI6XCJkdGZsXCIsXCJydWxlXCI6XCJqczpcXG4vKlxcblZlciAyMDIzLTEwLTI4IDEuMFxcbuWkh+azqO+8muS4jeimgeeUqOa1t+mYlOS7o+eggeagvOW8j+WMliDlhoXlrrnkvJrlh7rplJlcXG7lv4Xpobvlj4LmlbDvvJpcXG7liIbnsbvpopzoibIg5aSn57G75a6a5L2NIFxcbuWwj+exu+WumuS9jSDliIbnsbvmoIfpopgg5YiG57G76ZO+5o6lXFxuaHRtbCA9Pua6kOeggSBwYWdlID0+6aG156CBXFxu5Y+v6YCJ5Y+C5pWw77yaXFxu5ou85o6l5YiG57G7IOaKmOWPoOagh+iusCDlsZXlvIDmoIforrAg5o6S6ZmkXFxu5aSn57G76ZO+5o6lIOWkp+exu+agh+mimCDmuIXpmaTplK4g5byA5ZCv5oqY5Y+gXFxu6ZmE5Yqg5a6a5L2NXFxu6K+05piO77yaXFxu5aSW6Z2i55SoZ2V0TXlWYXIoTVlfUlVMRS51cmwpIOaIluiAhSDnirbmgIEg5Y+W6ZO+5o6lXFxu6a2U5pS5Os6xXFxuKi9cXG5cXG5sZXQgZW1wdHkgPSBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxubGV0IGNhdGVnb3JpZXMgPSBbXTtcXG5pZiAodHlwZW9mICjmi7zmjqXliIbnsbspICE9ICd1bmRlZmluZWQnICYmIOaLvOaOpeWIhuexuyAhPSAnJykge1xcbiAgICBjYXRlZ29yaWVzID0gW3BkZmEoaHRtbCwg5aSn57G75a6a5L2NKS5qb2luKCdcXFxcbicpXTtcXG4gICAgaWYgKOaLvOaOpeWIhuexuy5pbmNsdWRlcygnOycpKSB7XFxuICAgICAgICDmi7zmjqXliIbnsbsgPSDmi7zmjqXliIbnsbsuc3BsaXQoJzsnKTtcXG4gICAgfVxcbiAgICBpZiAo5ou85o6l5YiG57G7LmNvbnN0cnVjdG9yID09IEFycmF5KSB7XFxuICAgICAgICDmi7zmjqXliIbnsbsuZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICAgICAgICBjYXRlZ29yaWVzID0gY2F0ZWdvcmllcy5jb25jYXQocGRmYShodG1sLCBpdGVtKSk7XFxuICAgICAgICB9KVxcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgY2F0ZWdvcmllcyA9IFtwZGZhKGh0bWwsIOWkp+exu+WumuS9jSkuam9pbignXFxcXG4nKV0uY29uY2F0KHBkZmEoaHRtbCwg5ou85o6l5YiG57G7KSk7XFxuICAgIH1cXG4gICAgaWYgKHR5cGVvZiAo6ZmE5Yqg5a6a5L2NKSAhPSAndW5kZWZpbmVkJyAmJiDpmYTliqDlrprkvY0ubGVuZ3RoID4gMCkge1xcbiAgICAgICAg6ZmE5Yqg5a6a5L2NLmZvckVhY2goeCA9PiB7XFxuICAgICAgICAgICAgdmFyIOS4gOe6pyA9IHBkZmEoaHRtbCwgeC7kuIDnuqflrprkvY0pLm1hcChzID0+IHtcXG4gICAgICAgICAgICAgICAgdmFyIOWumuS9jSA9IHBkZmEocywgeC7lsI/nsbspLm1hcChxID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IHBkZmgocSwgeC7moIfpopgpO1xcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9ICdhJ1xcbiAgICAgICAgICAgICAgICAgICAgaWYgKHgu6ZO+5o6lLmluY2x1ZGVzKCdAQCcpKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB4LumTvuaOpS5zcGxpdCgnQEAnKVswXVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGRmaChxLCB4LumTvuaOpS5zcGxpdCgnQEAnKVsxXSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHgu6L2s5o2iID09IHRydWUpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8bGkgZGF0YS10eXBlPVxcXCIke3N0YXRlfVxcXCIgZGF0YS12YWw9XFxcIiR7dmFsdWV9XFxcIj48YSBocmVmPVxcXCJcXFwiPiR7dGl0bGV9PC9hPjwvbGk+YFxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPGEgdHlwZT1cXFwiQGV4dHJhXFxcIiBzdGF0ZT1cXFwiJHtzdGF0ZX1cXFwiIHZhbHVlPVxcXCIke3ZhbHVlfVxcXCI+JHt0aXRsZX08L2E+YDtcXG4gICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWYgPSBwZChxLCB4LumTvuaOpSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8YSBocmVmPVxcXCIke2hyZWZ9XFxcIj4ke3RpdGxlfTwvYT5gO1xcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIOWumuS9jTtcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICBjYXRlZ29yaWVzLnB1c2go5LiA57qnLmpvaW4oJ1xcXFxuJykpO1xcbiAgICAgICAgfSk7XFxuICAgIH1cXG59IGVsc2Uge1xcbiAgICBjYXRlZ29yaWVzID0gW3BkZmEoaHRtbCwg5aSn57G75a6a5L2NKS5qb2luKCdcXFxcbicpXTtcXG59XFxuXFxubGV0IGl0ZW1zID0gW107XFxubGV0IGNhdGVzID0gW107XFxubGV0IGluaXRfY2F0ZSA9IG5ldyBBcnJheSgyMCkuZmlsbChcXFwiMFxcXCIpO1xcbmNvbnN0IGZvbGQgPSBnZXRNeVZhcihNWV9SVUxFLmdyb3VwLCBcXFwiMFxcXCIpO1xcbmNvbnN0IGNhdGVfdGVtcCA9IEpTT04ucGFyc2UoZ2V0TXlWYXIoXFxcImhlYWQuY2F0ZVxcXCIsIEpTT04uc3RyaW5naWZ5KGluaXRfY2F0ZSkpKTtcXG52YXIg5oqY5Y+g54q25oCBID0gKHR5cGVvZiAo5byA5ZCv5oqY5Y+gKSAhPSAndW5kZWZpbmVkJykgPyDlvIDlkK/mipjlj6AgOiB0cnVlO1xcbnZhciDmipjlj6AgPSAodHlwZW9mICjmipjlj6DmoIforrApICE9ICd1bmRlZmluZWQnICYmIOaKmOWPoOagh+iusCAhPSAnJykgPyDmipjlj6DmoIforrAgOiAn4oCc4oCc4oCd4oCdJyArICfiiKgnLmZvbnRjb2xvcihcXFwiI0ZGMDAwMFxcXCIpO1xcbnZhciDlsZXlvIAgPSAodHlwZW9mICjlsZXlvIDmoIforrApICE9ICd1bmRlZmluZWQnICYmIOWxleW8gOagh+iusCAhPSAnJykgPyDlsZXlvIDmoIforrAgOiAn4oCc4oCc4oCd4oCdJyArICfiiKcnLmZvbnRjb2xvcihcXFwiIzFhYWQxOVxcXCIpO1xcbnZhciDmuIXpmaQgPSAodHlwZW9mICjmuIXpmaTplK4pICE9ICd1bmRlZmluZWQnICYmIOa4hemZpOmUriAhPSAnJykgPyDmuIXpmaTplK4gOiBbXTtcXG52YXIg54q25oCBID0gKHR5cGVvZiAo54q25oCB5qCH6K6wKSAhPSAndW5kZWZpbmVkJyAmJiDnirbmgIHmoIforrAgIT0gJycpID8g54q25oCB5qCH6K6wIDogTVlfUlVMRS51cmw7XFxudmFyIOWkp+exu+WkhOeQhiA9IHR5cGVvZiAo5LiA57qn5YiG57G75aSE55CGKSAhPSAndW5kZWZpbmVkJyA/IHRydWUgOiBmYWxzZTtcXG5cXG52YXIgX+WKqOaAgei/lOWbnj10cnVlO1xcbmlmKHR5cGVvZiDliqjmgIHov5Tlm54hPSd1bmRlZmluZWQnJiZ0eXBlb2Yg5Yqo5oCB6L+U5ZueID09PSBcXFwiYm9vbGVhblxcXCIpe1xcbiAgICBf5Yqo5oCB6L+U5ZuePeWKqOaAgei/lOWbnjtcXG59XFxuXFxudmFyIOaQnOe0oiA9IHR5cGVvZiAo5byA5ZCv5pCc57SiKSAhPSAndW5kZWZpbmVkJyA/IOW8gOWQr+aQnOe0oiA6IGZhbHNlO1xcbnZhciDlhajmuIUgPSAodHlwZW9mICjlhajmuIXplK4pICE9ICd1bmRlZmluZWQnICYmIOWFqOa4hemUriAhPSAnJykgPyDlhajmuIXplK4gOiBbXTtcXG7lhajmuIUudW5zaGlmdCgneWlfZmlyc3RwYWdlJyk7XFxuXFxuXFxuaWYgKHBhcnNlSW50KHBhZ2UpID09PSAxKSB7XFxuICAgIGlmICjmkJzntKIpIHtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCJcXFwiLFxcbiAgICAgICAgICAgIHVybDogXFxcIidoaWtlcjovL3NlYXJjaD9ydWxlPVxcXCIgKyBNWV9SVUxFLnRpdGxlICsgXFxcIiZzPScraW5wdXRcXFwiLFxcbiAgICAgICAgICAgIGRlc2M6IFxcXCLmkJzntKLlhbPplK7or41cXFwiLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiLFxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogZ2V0TXlWYXIoJ2tleXdvcmQnLCAnJyksXFxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHB1dE15VmFyKCdrZXl3b3JkJywgaW5wdXQpO1xcbiAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pXFxuICAgIH1cXG4gICAgaWYgKHBhZ2UgPT0gMSApIHtcXG4gICAgaWYgKOaKmOWPoOeKtuaAgSkge1xcbiAgICAgICAgICBpdGVtcy5wdXNoKHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IGZvbGQgPT09ICcxJyA/IOaKmOWPoCA6IOWxleW8gCxcXG4gICAgICAgICAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKCh0aXRsZSwgZm9sZCwgdSwgYWxsLCBleHBzKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICB2YXIgZm9sZCA9IGdldE15VmFyKE1ZX1JVTEUuZ3JvdXAsIGZvbGQpO1xcbiAgICAgICAgICAgICAgICAgICAgaWYoZ2V0TXlWYXIoJ2NhdGVfZW1wdHknLCdlbXB0eScpPT0nZW1wdHknKXtcXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0b2FzdDovL+aLvOaOpemDqOWIhuS4uuepuic7XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgIHZhciBb5bGV5byALCDmipjlj6BdID0gZXhwcztcXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2xkID09IDEpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3ggPSBmaW5kSXRlbXNCeUNscyh0aXRsZSArICdjYXRlX2J1dHRvbicpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2UwLnB1dE15VmFyKCdjYXRlX2J1dHRvbicsIGN4KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVJdGVtQnlDbHModGl0bGUgKyAnY2F0ZV9idXR0b24nKTtcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN4ID0gc3RvcmFnZTAuZ2V0TXlWYXIoJ2NhdGVfYnV0dG9uJywgW10pLm1hcCh4ID0+IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeFsnY29sX3R5cGUnXSA9IHhbJ2NvbF90eXBlJ10gPyB4Wydjb2xfdHlwZSddIDogeFsndHlwZSddO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geDtcXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJdGVtQWZ0ZXIodGl0bGUgKyAnY2F0ZV9saW5lJywgY3gpXFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAvKmFsbC5mb3JFYWNoKChpdGVtKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgIGNsZWFyTXlWYXIoaXRlbSk7XFxuICAgICAgICAgICAgICAgICAgICB9KTsqL1xcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlSXRlbSh0aXRsZSArICdjYXRlX2V4cCcsIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogZm9sZCA9PSAxID8g5bGV5byAIDog5oqY5Y+gLFxcbiAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgICAgIHB1dE15VmFyKE1ZX1JVTEUuZ3JvdXAsIGZvbGQgPT09IFxcXCIxXFxcIiA/IFxcXCIwXFxcIiA6IFxcXCIxXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICB9LCBNWV9SVUxFLnRpdGxlLCBmb2xkLCDnirbmgIEsIOWFqOa4hSwgW+WxleW8gCwg5oqY5Y+gXSksXFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiAnc2Nyb2xsX2J1dHRvbicsXFxuICAgICAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgICAgICBpZDogTVlfUlVMRS50aXRsZSArICdjYXRlX2V4cCcsXFxuICAgICAgICAgICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmuIXpmaTnirbmgIEnLFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzOiAkLnRvU3RyaW5nKCh4LCBhbGwsIGNsKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyTXlWYXIoeCk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyTXlWYXIoJ2hlYWQuY2F0ZScpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwuZm9yRWFjaCgoaXRlbSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJNeVZhcihpdGVtKVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbC5mb3JFYWNoKChpdGVtKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhck15VmFyKGl0ZW0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwg54q25oCBLCDlhajmuIUsIOa4hemZpClcXG4gICAgICAgICAgICAgICAgICAgIH1dXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9KVxcbiAgICB9ZWxzZXtcXG4gICAgICAgdmFyIGJvPUpTT04ucGFyc2UoZ2V0TXlWYXIoJ2hlYWQuY2F0ZScsJ1tdJykpLmV2ZXJ5KHg9Png9PT1cXFwiMFxcXCIpO1xcbiAgICAgICBpZighYm8pe1xcbiAgICAgICBpdGVtcy5wdXNoKHtcXG4gICAgICAgICB0aXRsZTon4oCc4oCc4oCd4oCdJysn4pm7Jy5mb250Y29sb3IoJyMzQ0IzNzEnKSxcXG4gICAgICAgICBjb2xfdHlwZTonc2Nyb2xsX2J1dHRvbicsXFxuICAgICAgICAgdXJsOiQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKHgsIGFsbCwgY2wpPT57XFxuICAgICAgICAgICBjbGVhck15VmFyKHgpO1xcbiAgICAgICAgICAgY2xlYXJNeVZhcignaGVhZC5jYXRlJyk7XFxuICAgICAgICAgICBhbGwuZm9yRWFjaCgoaXRlbSkgPT4ge1xcbiAgICAgICAgICAgICBjbGVhck15VmFyKGl0ZW0pXFxuICAgICAgICAgIH0pXFxuICAgICAgICAgICAgY2wuZm9yRWFjaCgoaXRlbSkgPT4ge1xcbiAgICAgICAgICAgICBjbGVhck15VmFyKGl0ZW0pXFxuICAgICAgICAgICB9KVxcbiAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgICAgcmV0dXJuICdoaWtlcjovL2VtcHR5JztcXG4gICAgICAgICB9LCDnirbmgIEsIOWFqOa4hSwg5riF6ZmkKSxcXG4gICAgICAgfSlcXG4gICAgICB9fVxcbiAgICB9XFxuICAgIGxldCBzZXRUaXRsZSA9IChrLCBpLCB0KSA9PiB7XFxuICAgICAgICByZXR1cm4gayA9PSBpID8gXFxcIuKAnOKAnOKAneKAnVxcXCIgKyB0LmZvbnRjb2xvcijliIbnsbvpopzoibIpIDogdFxcbiAgICB9XFxuICAgIGNhdGVnb3JpZXMuZm9yRWFjaCgoY2F0ZWdvcnksIGluZGV4KSA9PiB7XFxuICAgICAgICBsZXQgc3ViX2NhdGVnb3JpZXMgPSBbXTtcXG4gICAgICAgIGlmICjlsI/nsbvlrprkvY0uaW5jbHVkZXMoJzsnKSkge1xcbiAgICAgICAgICAgIHN1Yl9jYXRlZ29yaWVzID0gcGRmYShjYXRlZ29yeSwg5bCP57G75a6a5L2NLnNwbGl0KCc7JylbMF0pO1xcbiAgICAgICAgICAgIGlmIChzdWJfY2F0ZWdvcmllcy5sZW5ndGggPT0gMCkge1xcbiAgICAgICAgICAgICAgICBzdWJfY2F0ZWdvcmllcyA9IHBkZmEoY2F0ZWdvcnksIOWwj+exu+WumuS9jS5zcGxpdCgnOycpWzFdKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIHN1Yl9jYXRlZ29yaWVzID0gcGRmYShjYXRlZ29yeSwg5bCP57G75a6a5L2NKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xcbiAgICAgICAgICAgIHN1Yl9jYXRlZ29yaWVzLmZvckVhY2goKGl0ZW0sIGtleSkgPT4ge1xcbiAgICAgICAgICAgICAgICBsZXQgX+Wkp+exu+mTvuaOpSA9ICh0eXBlb2YgKOWkp+exu+mTvuaOpSkgIT0gJ3VuZGVmaW5lZCcgJiYg5aSn57G76ZO+5o6lICE9ICcnKSA/IOWkp+exu+mTvuaOpSA6IOWIhuexu+mTvuaOpTtcXG5cXG4gICAgICAgICAgICAgICAgbGV0IF/lpKfnsbvmoIfpopggPSAodHlwZW9mICjlpKfnsbvmoIfpopgpICE9ICd1bmRlZmluZWQnICYmIOWkp+exu+agh+mimCAhPSAnJykgPyDlpKfnsbvmoIfpopggOiDliIbnsbvmoIfpopg7XFxuXFxuICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IHBkZmgoaXRlbSwgX+Wkp+exu+agh+mimCk7XFxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKOaOkumZpCkgIT0gJ3VuZGVmaW5lZCcgJiYg5o6S6ZmkICE9ICcnKSB7XFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IHRpdGxlLnJlcGxhY2UobmV3IFJlZ0V4cCjmjpLpmaQsIFxcXCJnXFxcIiksIFxcXCJcXFwiKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBsZXQgcGFyYW1zID0ge1xcbiAgICAgICAgICAgICAgICAgICAgY2F0ZV90ZW1wOiBjYXRlX3RlbXAsIGtleToga2V5LCBwYWdlOiBwYWdlLCBjbGVhcnM6IOa4hemZpCwgc3RhdGU6IOeKtuaAgSwgYWxsY2xlYXJzOiDlhajmuIVcXG4gICAgICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgICAgICBsZXQgdXJsID0gcGQoaXRlbSwgX+Wkp+exu+mTvuaOpSk7XFxuICAgICAgICAgICAgICAgIGlmICjlpKfnsbvlpITnkIYpIHtcXG4gICAgICAgICAgICAgICAgICAgIC8vbG9nKOS4gOe6p+WIhuexu+WkhOeQhilcXG4gICAgICAgICAgICAgICAgICAgIC8vbG9nKCQuc3RyaW5naWZ5KOS4gOe6p+WIhuexu+WkhOeQhikpXFxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSB1cmw7XFxuICAgICAgICAgICAgICAgICAgICBldmFsKFxcXCJyZXN1bHQgPSBcXFwiICsg5LiA57qn5YiG57G75aSE55CGKTtcXG4gICAgICAgICAgICAgICAgICAgIC8vbG9nKHJlc3VsdClcXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IHJlc3VsdDtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHtcXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBzZXRUaXRsZShrZXkudG9TdHJpbmcoKSwgY2F0ZV90ZW1wW2luZGV4XSwgdGl0bGUpLFxcbiAgICAgICAgICAgICAgICAgICAgY29sX3R5cGU6ICdzY3JvbGxfYnV0dG9uJyxcXG4gICAgICAgICAgICAgICAgICAgIHVybDogJCh1cmwgKyAnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgocGFyYW1zKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld19jYXRlID0gW107XFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmNsZWFycy5mb3JFYWNoKChpdGVtKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyTXlWYXIoaXRlbSlcXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5hbGxjbGVhcnMuZm9yRWFjaCgoaXRlbSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhck15VmFyKGl0ZW0pXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuY2F0ZV90ZW1wLmZvckVhY2goKGNhdGUsIGluZGV4KSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld19jYXRlLnB1c2goaW5kZXggPT09IDAgPyBwYXJhbXMua2V5LnRvU3RyaW5nKCkgOiBcXFwiMFxcXCIpXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXRNeVZhcihcXFwiaGVhZC5jYXRlXFxcIiwgSlNPTi5zdHJpbmdpZnkobmV3X2NhdGUpKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXRNeVZhcihwYXJhbXMuc3RhdGUsIGlucHV0KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfSwgcGFyYW1zKVxcbiAgICAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICBpdGVtcy5wdXNoKHtcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJibGFua19ibG9ja1xcXCIsXFxuICAgICAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgICAgICBpZDogTVlfUlVMRS50aXRsZSArICdjYXRlX2xpbmUnLFxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSlcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgc3ViX2NhdGVnb3JpZXMuZm9yRWFjaCgoaXRlbSwga2V5KSA9PiB7XFxuICAgICAgICAgICAgICAgIHZhciBleHRyYXBvcyA9IGZhbHNlO1xcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pbmNsdWRlcygndHlwZT1cXFwiQGV4dHJhXFxcIicpKSB7XFxuICAgICAgICAgICAgICAgICAgICBleHRyYXBvcyA9IHRydWU7XFxuICAgICAgICAgICAgICAgICAgICAvL2xvZygn6ZmE5Yqg5a6a5L2NJylcXG4gICAgICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgICAgICBpZiAoZXh0cmFwb3MpIHtcXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IHBkZmgoaXRlbSwgJ2EmJlRleHQnKTtcXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKOaOkumZpCkgIT0gJ3VuZGVmaW5lZCcgJiYg5o6S6ZmkICE9ICcnKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSB0aXRsZS5yZXBsYWNlKG5ldyBSZWdFeHAo5o6S6ZmkLCBcXFwiZ1xcXCIpLCBcXFwiXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBwZGZoKGl0ZW0sICdhJiZzdGF0ZScpLFxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwZGZoKGl0ZW0sICdhJiZ2YWx1ZScpLFxcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcblxcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gcGRmaChpdGVtLCDliIbnsbvmoIfpopgpO1xcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAo5o6S6ZmkKSAhPSAndW5kZWZpbmVkJyAmJiDmjpLpmaQgIT0gJycpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IHRpdGxlLnJlcGxhY2UobmV3IFJlZ0V4cCjmjpLpmaQsIFxcXCJnXFxcIiksIFxcXCJcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gJyc7XFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRydWUpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIOWIhuexu+mTvuaOpS5pbmNsdWRlcygnQEBAJyk6XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24gPSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBwZGZoKGl0ZW0sIOWIhuexu+mTvuaOpS5zcGxpdCgnQEBAJylbMF0pLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHBkZmgoaXRlbSwg5YiG57G76ZO+5o6lLnNwbGl0KCdAQEAnKVsxXSksXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSDliIbnsbvpk77mjqUuaW5jbHVkZXMoJ0BAJyk6XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24gPSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiDliIbnsbvpk77mjqUuc3BsaXQoJ0BAJylbMF0sXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcGRmaChpdGVtLCDliIbnsbvpk77mjqUuc3BsaXQoJ0BAJylbMV0pLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24gPSBwZChpdGVtLCDliIbnsbvpk77mjqUpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIC8qdmFyIGpzb2495YiG57G76ZO+5o6lLmluY2x1ZGVzKCdAQEAnKT97XFxuICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6cGRmaChpdGVtLOWIhuexu+mTvuaOpS5zcGxpdCgnQEBAJylbMF0pLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTpwZGZoKGl0ZW0s5YiG57G76ZO+5o6lLnNwbGl0KCdAQEAnKVsxXSksXFxuICAgICAgICAgICAgICAgICAgICAgfTpwZChpdGVtLOWIhuexu+mTvuaOpSk7XFxuICAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAganNvbj3liIbnsbvpk77mjqUuaW5jbHVkZXMoJ0BAJyk/e1xcbiAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOuWIhuexu+mTvuaOpS5zcGxpdCgnQEAnKVswXSxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6cGRmaChpdGVtLOWIhuexu+mTvuaOpS5zcGxpdCgnQEAnKVsxXSksXFxuICAgICAgICAgICAgICAgICAgICAgfTpwZChpdGVtLOWIhuexu+mTvuaOpSk7Ki9cXG5cXG4gICAgICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgICAgICBsZXQgcGFyYW1zID0ge1xcbiAgICAgICAgICAgICAgICAgICAgY2F0ZV90ZW1wOiBjYXRlX3RlbXAsIGluZGV4OiBpbmRleCwga2V5OiBrZXksIHBhZ2U6IHBhZ2UsIGpzb246IGpzb24sIHN0YXRlOiDnirbmgIEsIGFsbGNsZWFyczog5YWo5riFXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgY2F0ZXMucHVzaCh7XFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogc2V0VGl0bGUoa2V5LnRvU3RyaW5nKCksIGNhdGVfdGVtcFtpbmRleF0sIHRpdGxlKSxcXG4gICAgICAgICAgICAgICAgICAgIHVybDogJCgnaGlrZXI6Ly9lbXB0eScgKyAnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgocGFyYW1zKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmFsbGNsZWFycy5mb3JFYWNoKChpdGVtKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyTXlWYXIoaXRlbSlcXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5jYXRlX3RlbXBbcGFyYW1zLmluZGV4XSA9IHBhcmFtcy5rZXkudG9TdHJpbmcoKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXRNeVZhcihcXFwiaGVhZC5jYXRlXFxcIiwgSlNPTi5zdHJpbmdpZnkocGFyYW1zLmNhdGVfdGVtcCkpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbXMuanNvbi5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1dE15VmFyKCdkdF8nICsgcGFyYW1zLmpzb24udHlwZSwgcGFyYW1zLmpzb24udmFsdWUpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1dE15VmFyKHBhcmFtcy5zdGF0ZSwgcGFyYW1zLmpzb24pO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSh0cnVlKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfSwgcGFyYW1zKSxcXG4gICAgICAgICAgICAgICAgICAgIGNvbF90eXBlOiAnc2Nyb2xsX2J1dHRvbicsXFxuICAgICAgICAgICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsczogTVlfUlVMRS50aXRsZSArICdjYXRlX2J1dHRvbicsXFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgIGNhdGVzLnB1c2goe1xcbiAgICAgICAgICAgICAgICBjb2xfdHlwZTogXFxcImJsYW5rX2Jsb2NrXFxcIixcXG4gICAgICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgICAgIGNsczogTVlfUlVMRS50aXRsZSArICdjYXRlX2J1dHRvbicsXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgIH1cXG4gICAgfSlcXG59XFxuXFxuXFxuaWYgKGZvbGQgPT09IFxcXCIxXFxcIiB8fCDmipjlj6DnirbmgIEgPT0gZmFsc2UpIHtcXG4gICAgaXRlbXMgPSBpdGVtcy5jb25jYXQoY2F0ZXMpO1xcbn1cXG5pZiAoZm9sZCA9PT0gXFxcIjBcXFwiKSB7XFxuICAgIHN0b3JhZ2UwLnB1dE15VmFyKCdjYXRlX2J1dHRvbicsIGNhdGVzKVxcbn1cXG5pZihjYXRlcy5sZW5ndGg9PTApe1xcbiAgICAgcHV0TXlWYXIoJ2NhdGVfZW1wdHknLCdlbXB0eScpO1xcbn1lbHNle1xcbiAgICAgcHV0TXlWYXIoJ2NhdGVfZW1wdHknLCdub2VtcHR5Jyk7XFxufVxcblxcbmlmICh0eXBlb2Ygc2V0UHJlUmVzdWx0ICE9ICd1bmRlZmluZWQnJiZf5Yqo5oCB6L+U5ZueKSB7XFxuICAgIGl0ZW1zID0gZC5jb25jYXQoaXRlbXMpO1xcbiAgICAvL+a4heepuue7p+aJv+aVsOe7hFxcbiAgICBkLmxlbmd0aCA9IDA7XFxuICAgIHNldFByZVJlc3VsdChpdGVtcyk7XFxufSBlbHNlIHtcXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICAgIGQucHVzaChpdGVtKTtcXG4gICAgfSlcXG59XFxuXCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLkuoznuqforr7nva5cIixcInBhdGhcIjpcImVyamlcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxuY29uc3QgcGFnZSA9IE1ZX1BBR0U7XFxuYWRkTGlzdGVuZXIoXFxcIm9uQ2xvc2VcXFwiLCAkLnRvU3RyaW5nKCgpID0+IHtjbGVhck15VmFyKCdtb2QnKTsgfSkgICk7XFxuZC5wdXNoKHt0aXRsZTogXFxcIlxcXCIsdXJsOiBcXFwiXFxcIixjb2xfdHlwZTogXFxcImlucHV0XFxcIixkZXNjOiBcXFwi6K+36L6T5YWl5pKt5pS+6K+m5oOF5Zyw5Z2A77yM5aaCaHR0cHM6Ly93d3cuY3owMTAxLmNvbS9tb3ZpZS8yMDI3MS5odG1sXFxcIixcXG4gICAgcGljX3VybDogXFxcIlxcXCIsZXh0cmE6IHt0eXBlOiBcXFwidGV4dGFyZWFcXFwiLGhlaWdodDogMixoaWdobGlnaHQ6IHRydWUsdGl0bGVWaXNpYmxlOiBmYWxzZSxcXG4gICAgICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtwdXRNeVZhcihcXFwicnVsZVxcXCIsIGlucHV0KTt9KSxcXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZ2V0TXlWYXIoXFxcInJ1bGVcXFwiLCBcXFwiXFxcIikgICB9XFxufSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCJcXFwiLHVybDogXFxcIlxcXCIsY29sX3R5cGU6IFxcXCJpbnB1dFxcXCIsZGVzYzogXFxcIuaSreaUvumTvuaOpeihpeWFqO+8jOWkp+mDqOWIhue8uuWwkeWfn+WQje+8jOiDveaSreaUvuWwseS4jemcgOimgVxcXCIscGljX3VybDogXFxcIlxcXCIsXFxuICAgIGV4dHJhOiB7dGl0bGVWaXNpYmxlOiBmYWxzZSxvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoXFxcImJxXFxcIiwgaW5wdXQpOyB9KSxcXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZ2V0TXlWYXIoXFxcImJxXFxcIiwgXFxcIlxcXCIpICAgIH1cXG59KTtcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogXFxcIlxcXCIsdXJsOiBcXFwiXFxcIixjb2xfdHlwZTogXFxcImlucHV0XFxcIixkZXNjOiBcXFwi5rW35oql5qCH6aKYXFxcIixwaWNfdXJsOiBcXFwiXFxcIixcXG4gICAgZXh0cmE6IHt0aXRsZVZpc2libGU6IGZhbHNlLG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwicjNcXFwiLCBpbnB1dCk7IH0pLFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBnZXRNeVZhcihcXFwicjNcXFwiLCBcXFwiXFxcIikgICAgfVxcbn0pO1xcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwiXFxcIix1cmw6IFxcXCJcXFwiLGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiLGRlc2M6IFxcXCLmtbfmiqXmj4/ov7BcXFwiLHBpY191cmw6IFxcXCJcXFwiLFxcbiAgICBleHRyYToge3RpdGxlVmlzaWJsZTogZmFsc2Usb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKFxcXCJyNFxcXCIsIGlucHV0KTsgfSksXFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGdldE15VmFyKFxcXCJyNFxcXCIsIFxcXCJcXFwiKSAgICB9XFxufSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCJcXFwiLHVybDogXFxcIlxcXCIsY29sX3R5cGU6IFxcXCJpbnB1dFxcXCIsZGVzYzogXFxcIua1t+aKpeWbvueJh1xcXCIscGljX3VybDogXFxcIlxcXCIsXFxuICAgIGV4dHJhOiB7dGl0bGVWaXNpYmxlOiBmYWxzZSxvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoXFxcInI1XFxcIiwgaW5wdXQpOyB9KSxcXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZ2V0TXlWYXIoXFxcInI1XFxcIiwgXFxcIlxcXCIpICAgIH1cXG59KTtcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogXFxcIlxcXCIsdXJsOiBcXFwiXFxcIixjb2xfdHlwZTogXFxcImlucHV0XFxcIixkZXNjOiBcXFwi6KeG6aKR566A5LuLXFxcIixwaWNfdXJsOiBcXFwiXFxcIixcXG4gICAgZXh0cmE6IHt0aXRsZVZpc2libGU6IGZhbHNlLG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwicjZcXFwiLCBpbnB1dCk7IH0pLFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBnZXRNeVZhcihcXFwicjZcXFwiLCBcXFwiXFxcIikgICAgfVxcbn0pO1xcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwiXFxcIix1cmw6IFxcXCJcXFwiLGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiLGRlc2M6IFxcXCLmkq3mlL7nur/ot69cXFwiLHBpY191cmw6IFxcXCJcXFwiLFxcbiAgICBleHRyYToge3RpdGxlVmlzaWJsZTogZmFsc2Usb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKFxcXCJyN1xcXCIsIGlucHV0KTsgfSksXFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGdldE15VmFyKFxcXCJyN1xcXCIsIFxcXCJcXFwiKSAgICB9XFxufSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCJcXFwiLHVybDogXFxcIlxcXCIsY29sX3R5cGU6IFxcXCJpbnB1dFxcXCIsZGVzYzogXFxcIue6v+i3r+WQjeensFxcXCIscGljX3VybDogXFxcIlxcXCIsXFxuICAgIGV4dHJhOiB7dGl0bGVWaXNpYmxlOiBmYWxzZSxvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoXFxcInI4XFxcIiwgaW5wdXQpOyB9KSxcXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZ2V0TXlWYXIoXFxcInI4XFxcIiwgXFxcIlxcXCIpICAgIH1cXG59KTtcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogXFxcIlxcXCIsdXJsOiBcXFwiXFxcIixjb2xfdHlwZTogXFxcImlucHV0XFxcIixkZXNjOiBcXFwi5pKt5pS+5YiX6KGoXFxcIixwaWNfdXJsOiBcXFwiXFxcIixcXG4gICAgZXh0cmE6IHt0aXRsZVZpc2libGU6IGZhbHNlLG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwicjlcXFwiLCBpbnB1dCk7IH0pLFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBnZXRNeVZhcihcXFwicjlcXFwiLCBcXFwiXFxcIikgICAgfVxcbn0pO1xcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwiXFxcIix1cmw6IFxcXCJcXFwiLGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiLGRlc2M6IFxcXCLliJfooajlkI3np7BcXFwiLHBpY191cmw6IFxcXCJcXFwiLFxcbiAgICBleHRyYToge3RpdGxlVmlzaWJsZTogZmFsc2Usb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKFxcXCJyMTBcXFwiLCBpbnB1dCk7IH0pLFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBnZXRNeVZhcihcXFwicjEwXFxcIiwgXFxcIlxcXCIpICAgIH1cXG59KTtcXG52YXIgbW9kID0gZ2V0TXlWYXIoXFxcIm1vZFxcXCIsIFxcXCJcXFwiKTtcXG5kLnB1c2goe1xcbiAgICAvLyDpooTop4jmjInpkq7vvJrov5vlhaXpooTop4jmqKHlvI9cXG4gICAgdGl0bGU6ICfpooTop4gnLFxcbiAgICBjb2xfdHlwZTogJ3RleHRfMycsXFxuICAgIHVybDogJCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgcHV0TXlWYXIoJ21vZCcsICdQcmUnKTsgLy8g6K6+572u5qih5byP5Li66aKE6KeIXFxuICAgICAgcmVmcmVzaFBhZ2UoKVxcbiAgICAgIHJldHVybiAndG9hc3Q6Ly/pooTop4gnfSlcXG4gIH0sIHtcXG4gICAgLy8g5Y+W5raI5oyJ6ZKu77ya6YCA5Ye66aKE6KeI5qih5byPXFxuICAgIHRpdGxlOiAn5Y+W5raI6aKE6KeIJyxcXG4gICAgY29sX3R5cGU6ICd0ZXh0XzMnLFxcbiAgICB1cmw6ICQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgIGNsZWFyTXlWYXIoJ21vZGUnKVxcbiAgICAgIHJlZnJlc2hQYWdlKClcXG4gICAgICByZXR1cm4gJ3RvYXN0Oi8v5Y+W5raI6aKE6KeIJyB9KVxcbiAgfSlcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogXFxcIuadpeS4quekuuS+i1xcXCIsXFxuICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgIHB1dE15VmFyKFxcXCJydWxlXFxcIiwgXFxcImh0dHBzOi8vd3d3Lmxhb2RpZmFuZy50di92b2RkZXRhaWwvMjE4ODc0Lmh0bWxcXFwiKTtcXG4gICAgcHV0TXlWYXIoXFxcImJxXFxcIiwgXFxcImh0dHBzOi8vd3d3Lmxhb2RpZmFuZy50dlxcXCIpO1xcbiAgICBwdXRNeVZhcihcXFwicjNcXFwiLCBcXFwiaDImJlRleHRcXFwiKTsgICAgXFxuXFx0XFx0ICAgcHV0TXlWYXIoXFxcInI0XFxcIiwgXFxcIi5kYXRhLDMmJlRleHRcXFwiKTtcXG5cXHRcXHQgIFxcdHB1dE15VmFyKFxcXCJyNVxcXCIsIFxcXCIuY29udGVudF90aHVtYiYmYSYmZGF0YS1vcmlnaW5hbFxcXCIpO1xcblxcdFxcdCAgXFx0cHV0TXlWYXIoXFxcInI2XFxcIixcXFwiLmRlc2MmJlRleHRcXFwiKTtcXG5cXHRcXHQgIFxcdHB1dE15VmFyKFxcXCJyN1xcXCIsIFxcXCIjTnVtVGFiJiZhXFxcIik7XFxuXFx0XFx0ICBcXHRwdXRNeVZhcihcXFwicjhcXFwiLCBcXFwiYSYmYWx0XFxcIik7XFxuXFx0XFx0ICBcXHRwdXRNeVZhcihcXFwicjlcXFwiLFxcXCJib2R5JiYuY29udGVudF9wbGF5bGlzdFxcXCIgKTtcXG5cXHRcXHQgIFxcdHB1dE15VmFyKFxcXCJyMTBcXFwiLCBcXFwiYm9keSYmYVxcXCIpO1xcbiAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgfSksXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF8zXFxcIixcXG4gICAgZGVzYzogXFxcIlxcXCIsXFxuICAgIHBpY191cmw6IFxcXCJcXFwiXFxufSk7XFxuXFxuaWYgKG1vZCA9PSAnUHJlJykge1xcbnZhciB1cmxfcHJlZml4ID0gZ2V0TXlWYXIoXFxcImJxXFxcIiwgXFxcIlxcXCIpO1xcbnZhciB1cmwgPSBnZXRNeVZhcihcXFwicnVsZVxcXCIsIFxcXCJcXFwiKTtcXG52YXIg5qCH6aKYPSBnZXRNeVZhcihcXFwicjNcXFwiLCApO1xcbnZhciDmj4/ov7AgPSBnZXRNeVZhcihcXFwicjRcXFwiLCBcXFwiXFxcIikgO1xcbnZhciDlm77niYcgPWdldE15VmFyKFxcXCJyNVxcXCIsIFxcXCJcXFwiKTtcXG52YXIg566A5LuLID0gZ2V0TXlWYXIoXFxcInI2XFxcIiwgXFxcIlxcXCIpIDtcXG52YXIg57q/6Lev5YiX6KGoID0gZ2V0TXlWYXIoXFxcInI3XFxcIiwgXFxcIlxcXCIpIDtcXG52YXIg57q/6Lev5YiX6KGo5ZCN56ewID0gZ2V0TXlWYXIoXFxcInI4XFxcIiwgXFxcIlxcXCIpO1xcbnZhciDmkq3mlL7liJfooaggPSBnZXRNeVZhcihcXFwicjlcXFwiLCBcXFwiXFxcIikgO1xcbnZhciDmkq3mlL7liJfooajlkI3np7AgPSBnZXRNeVZhcihcXFwicjEwXFxcIiwgXFxcIlxcXCIpIDtcXG52YXIgaHRtbCA9IGZldGNoKHVybCk7XFxuZXZhbChKU09OLnBhcnNlKHJlcXVlc3QoJ2hpa2VyOi8vcGFnZS9sYXp5JykpLnJ1bGUpO1xcbnZhciBnZXRSYW5nZUNvbG9ycyA9IGZ1bmN0aW9uKCkge8KgcmV0dXJuICcjJyArICgnMDAwMDAnICsgKE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDAgPDwgMCkudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTYpO8KgfSAgXFxudmFyIHRpdGxlID0gcGRmaChodG1sLCDmoIfpopgpO1xcbnZhciBkZXNjPXBkKGh0bWwsIOaPj+i/sCk7XFxudmFyIHBpYyA9IHBkKGh0bWwsIOWbvueJhyk7XFxudmFyIGludHJvID0gcGRmaChodG1sLCDnroDku4spO1xcbnZhciBhcnRzID0gcGRmYShodG1sLOe6v+i3r+WIl+ihqCk7XFxudmFyIHRhYnMgPSBbXTtmb3IgKHZhciBpIGluIGFydHMpIHt0YWJzLnB1c2gocGRmaChhcnRzW2ldLCDnur/ot6/liJfooajlkI3np7ApKX07XFxudmFyIGNvbnRzID0gcGRmYShodG1sLCDmkq3mlL7liJfooagpO1xcbnZhciBsaXN0cyA9IFtdO2ZvciAodmFyIGkgaW4gY29udHMpIHtsaXN0cy5wdXNoKHBkZmEoY29udHNbaV0sIOaSreaUvuWIl+ihqOWQjeensCkpfTtcXG5sZXQgbGluZV9tb2RlbCA9IDg7XFxubGV0IGxpbmVfdHlwZV9tb2RlbCA9ICdibGFua19ibG9jayc7XFxuXFxuZC5wdXNoKHtcXG4gIHRpdGxlOiB0aXRsZSAsZGVzYzpkZXNjLFxcbiAgIHBpY191cmw6IHBpYyxcXG5cXHR1cmw6IHBpYyAsXFxuICBcXHRjb2xfdHlwZTogJ21vdmllXzFfdmVydGljYWxfcGljX2JsdXInLFxcblxcdGV4dHJhOiB7Z3JhZGllbnQ6IHRydWV9fSk7XFxuZC5wdXNoKHsvL+eugOS7i1xcbiAgdGl0bGU6ICfigJjigJjigJnigJknICsgJ+ewoeS7i++8micuZm9udGNvbG9yKFxcXCIjMWU5MGZmXFxcIikuYm9sZCgpICsgaW50cm8uc3Vic3RyKDAsIDU1KS5zbWFsbCgpICsgJy4uLuips+aDhScuZm9udGNvbG9yKFxcXCJyZWRcXFwiKS5zbWFsbCgpLFxcbiAgICB1cmw6ICdoaWtlcjovL2VtcHR5IyNub0hpc3RvcnkjJyArICdcXFxcbicgKyBpbnRybyArIGBAcnVsZT1qczp2YXIgcmVzID0ge307IHZhciBkID0gW107ZC5wdXNoKHt0aXRsZTon5YqH5oOF57Ch5LuL77yaJysgTVlfVVJMLnNwbGl0KCdoaWtlcjovL2VtcHR5IycpWzFdLGNvbF90eXBlOiAnbG9uZ190ZXh0J30pO3Jlcy5kYXRhID0gZDsgc2V0SG9tZVJlc3VsdChyZXMpO2AsXFxuICAgIGNvbF90eXBlOiAndGV4dF8xJ30pO1xcbmZvciAobGV0IGkgPSAwOyBpIDwgbGluZV9tb2RlbDsgaSsrKSB7IGQucHVzaCh7Y29sX3R5cGU6IGxpbmVfdHlwZV9tb2RlbH0pICB9XFx0XFxuLy/nur/ot6/liJfooahcXG5mdW5jdGlvbiBzZXRUYWJzKHRhYnMsIHZhcmkpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiAoZ2V0VmFyKCdzaHNvcnQnKSA9PSAnMScpID8gJ+KAmOKAmOKAmeKAmTxiPjxzcGFuIHN0eWxlPVxcXCJjb2xvcjogIzkzNzBkYlxcXCI+4oepPC9zcGFuPjwvYj4nIDogJ+KAmOKAmOKAmeKAmTxiPjxzcGFuIHN0eWxlPVxcXCJjb2xvcjogI2ZmYmYwMFxcXCI+4oenPC9zcGFuPjwvYj4nLFxcbiAgICAgICAgdXJsOiBgI25vTG9hZGluZyNAbGF6eVJ1bGU9LmpzOmxldCBjb25mID0gZ2V0VmFyKCdzaHNvcnQnKTtpZihjb25mPT0nMScpe3B1dFZhcih7a2V5OidzaHNvcnQnLCB2YWx1ZTonMCd9KTt9ZWxzZXtwdXRWYXIoe2tleTonc2hzb3J0JywgdmFsdWU6JzEnfSl9O3JlZnJlc2hQYWdlKCk7J3RvYXN0Oi8v5YiH5o+b5o6S5bqP5oiQ5YqfJ2AsXFxuICAgICAgICBjb2xfdHlwZTogJ3Njcm9sbF9idXR0b24nLFxcbiAgICAgICAgICB9KVxcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYnMubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgIHZhciB1cmwgPSBcXFwiI25vTG9hZGluZyNAbGF6eVJ1bGU9LmpzOnB1dFZhcignXFxcIiArIHZhcmkgKyBcXFwiJywgJ1xcXCIgKyBpICsgXFxcIicpO3JlZnJlc2hQYWdlKGZhbHNlKTsndG9hc3Q6Ly/liIfmj5vmiJDlip/vvIEnOycjbm9IaXN0b3J5I2hpa2VyOi8vZW1wdHknXFxcIjtcXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6IGdldFZhcih2YXJpLCAnMCcpID09IGkgPyAn4oCY4oCY4oCZ4oCZPGI+PHNwYW4gc3R5bGU9XFxcImNvbG9yOiAjZmZmZmZmXFxcIj4nICsgdGFic1tpXSArICc8L3NwYW4+PC9iPicgOiB0YWJzW2ldLFxcbiAgICAgICAgICAgIHVybDogdXJsLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiAnc2Nyb2xsX2J1dHRvbicsXFxuICAgICAgICAgICAgZXh0cmE6IHsnYmFja2dyb3VuZENvbG9yJzogZ2V0VmFyKHZhcmksICcwJykgPT0gaSA/IGdldFJhbmdlQ29sb3JzKCkgOiAnJ31cXG4gICAgICAgICAgICB9KVxcbiAgICAgICAgIH1kLnB1c2goe2NvbF90eXBlOiAnbGluZSd9KTtcXG59XFxuIFxcbi8v5pKt5pS+5YiX6KGoXFxuZnVuY3Rpb24gc2V0TGlzdHMobGlzdHMsIGluZGV4KSB7XFxuICAgIHZhciBsaXN0ID0gbGlzdHNbaW5kZXhdO1xcbiAgICBpZiAoZ2V0VmFyKCdzaHNvcnQnKSA9PSAnMScpIHtcXG4gICAgICAgIHZhciBsaXN0ID0gbGlzdHNbaW5kZXhdLnJldmVyc2UoKTtcXG4gICAgfVxcbiAgICBmb3IgKHZhciBqIGluIGxpc3QpIHtcXG5cXG4gICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgdGl0bGU6ICfigJjigJjigJnigJknICsgcGRmaChsaXN0W2pdLCAnYSYmVGV4dCcpXFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC/nrKwoXFxcXGQrKembhi8sICckMScpXFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKCfnrKwnLCAnJylcXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ+acnycsICcnKS5zbWFsbCgpLFxcbiAgICAgICAgICAgIHVybDogIHVybF9wcmVmaXgrcGRmaChsaXN0W2pdLCAnYSYmaHJlZicpK2xhenksXFxuICAgICAgICAgICAgY29sX3R5cGU6IGxpc3QubGVuZ3RoID4gMyA/ICd0ZXh0XzQnIDogJ3RleHRfMicsXFxuICAgICAgICAgICAgXFxuICAgICAgICB9KTtcXG4gICAgfVxcbn1cXG4gIHNldFRhYnModGFicywgTVlfVVJMKTtcXG4gIHNldExpc3RzKGxpc3RzLCBnZXRWYXIoTVlfVVJMLCAnMCcpKTtcXG4gIFxcbn1cXG5kLnB1c2goe1xcbiAgICBjb2xfdHlwZTogJ2JpZ19iaWdfYmxhbmtfYmxvY2snXFxufSk7XFxuXFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5LqM57qn6aG16Z2iXCIsXCJwYXRoXCI6XCJkZXRhaWxcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxudmFyIHNwbGl0X3VybHMgPSBbZ2V0UGFyYW0oJ2FjdHVhbF91cmwnKV1cXG52YXIgaHRtbCA9IGZldGNoKHNwbGl0X3VybHNbMF0pXFxubGV0IHVybF9wcmVmaXg9TVlfUEFSQU1TLmRhdGEuYnFcXG5jb25zdCDmoIfpopg9IE1ZX1BBUkFNUy5kYXRhLmJ0XFxuY29uc3Qg5o+P6L+wID0gTVlfUEFSQU1TLmRhdGEubXNcXG5jb25zdCDlm77niYcgPSBNWV9QQVJBTVMuZGF0YS50cFxcbmNvbnN0IOeugOS7iyA9IE1ZX1BBUkFNUy5kYXRhLmpqXFxuY29uc3Qg57q/6Lev5YiX6KGoID0gTVlfUEFSQU1TLmRhdGEueGxsYlxcbmNvbnN0IOe6v+i3r+WIl+ihqOWQjeensCA9IE1ZX1BBUkFNUy5kYXRhLnhsbGJtY1xcbmNvbnN0IOaSreaUvuWIl+ihqCA9IE1ZX1BBUkFNUy5kYXRhLmJmbGJcXG5jb25zdCDmkq3mlL7liJfooajlkI3np7AgPSBNWV9QQVJBTVMuZGF0YS5iZmxibWNcXG5ldmFsKEpTT04ucGFyc2UocmVxdWVzdCgnaGlrZXI6Ly9wYWdlL2xhenknKSkucnVsZSk7XFxudmFyIGdldFJhbmdlQ29sb3JzID0gZnVuY3Rpb24oKSB7wqByZXR1cm4gJyMnICsgKCcwMDAwMCcgKyAoTWF0aC5yYW5kb20oKSAqIDB4MTAwMDAwMCA8PCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7wqB9XFxudmFyIHRpdGxlID0gcGRmaChodG1sLCDmoIfpopgpXFxudmFyIGRlc2M9cGQoaHRtbCwg5o+P6L+wKVxcbnZhciBwaWMgPSBwZChodG1sLCDlm77niYcpXFxudmFyIGludHJvID0gcGRmaChodG1sLCDnroDku4spXFxudmFyIGFydHMgPSBwZGZhKGh0bWws57q/6Lev5YiX6KGoKTtcXG52YXIgdGFicyA9IFtdO2ZvciAodmFyIGkgaW4gYXJ0cykge3RhYnMucHVzaChwZGZoKGFydHNbaV0sIOe6v+i3r+WIl+ihqOWQjeensCkpfVxcbnZhciBjb250cyA9IHBkZmEoaHRtbCwg5pKt5pS+5YiX6KGoKTtcXG52YXIgbGlzdHMgPSBbXTtmb3IgKHZhciBpIGluIGNvbnRzKSB7bGlzdHMucHVzaChwZGZhKGNvbnRzW2ldLCDmkq3mlL7liJfooajlkI3np7ApKX1cXG5sZXQgbGluZV9tb2RlbCA9IDg7XFxubGV0IGxpbmVfdHlwZV9tb2RlbCA9ICdibGFua19ibG9jayc7XFxuZC5wdXNoKHtcXG4gIHRpdGxlOiB0aXRsZSAsZGVzYzogZGVzYyxcXG4gICBwaWNfdXJsOiBwaWMsXFxuXFx0dXJsOiBwaWMgLFxcblxcdGNvbF90eXBlOiAnbW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1cicsXFxuXFx0ZXh0cmE6IHtncmFkaWVudDogdHJ1ZX19KTtcXG5cXG5kLnB1c2goey8v566A5LuLXFxuICB0aXRsZTogJ+KAmOKAmOKAmeKAmScgKyAn57Ch5LuL77yaJy5mb250Y29sb3IoXFxcIiMxZTkwZmZcXFwiKS5ib2xkKCkgKyBpbnRyby5zdWJzdHIoMCwgNTUpLnNtYWxsKCkgKyAnLi4u6Kmz5oOFJy5mb250Y29sb3IoXFxcInJlZFxcXCIpLnNtYWxsKCksXFxuICAgIHVybDogJ2hpa2VyOi8vZW1wdHkjI25vSGlzdG9yeSMnICsgJ1xcXFxuJyArIGludHJvICsgYEBydWxlPWpzOnZhciByZXMgPSB7fTsgdmFyIGQgPSBbXTtkLnB1c2goe3RpdGxlOifliofmg4XnsKHku4vvvJonKyBNWV9VUkwuc3BsaXQoJ2hpa2VyOi8vZW1wdHkjJylbMV0sY29sX3R5cGU6ICdsb25nX3RleHQnfSk7cmVzLmRhdGEgPSBkOyBzZXRIb21lUmVzdWx0KHJlcyk7YCxcXG4gICAgY29sX3R5cGU6ICd0ZXh0XzEnfSk7XFxuZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lX21vZGVsOyBpKyspIHsgZC5wdXNoKHtjb2xfdHlwZTogbGluZV90eXBlX21vZGVsfSkgIH1cXHRcXG4vL+e6v+i3r+WIl+ihqFxcblxcbmZ1bmN0aW9uIHNldFRhYnModGFicywgdmFyaSkge1xcbiAgIHRyeSB7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogKGdldFZhcignc2hzb3J0JykgPT0gJzEnKSA/ICfigJjigJjigJnigJk8Yj48c3BhbiBzdHlsZT1cXFwiY29sb3I6ICM5MzcwZGJcXFwiPuKHqTwvc3Bhbj48L2I+JyA6ICfigJjigJjigJnigJk8Yj48c3BhbiBzdHlsZT1cXFwiY29sb3I6ICNmZmJmMDBcXFwiPuKHpzwvc3Bhbj48L2I+JyxcXG4gICAgICAgIHVybDogYCNub0xvYWRpbmcjQGxhenlSdWxlPS5qczpsZXQgY29uZiA9IGdldFZhcignc2hzb3J0Jyk7aWYoY29uZj09JzEnKXtwdXRWYXIoe2tleTonc2hzb3J0JywgdmFsdWU6JzAnfSk7fWVsc2V7cHV0VmFyKHtrZXk6J3Noc29ydCcsIHZhbHVlOicxJ30pfTtyZWZyZXNoUGFnZSgpOyd0b2FzdDovL+WIh+aPm+aOkuW6j+aIkOWKnydgLFxcbiAgICAgICAgY29sX3R5cGU6ICdzY3JvbGxfYnV0dG9uJyxcXG4gICAgfSlcXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJzLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgICB2YXIgdXJsID0gXFxcIiNub0xvYWRpbmcjQGxhenlSdWxlPS5qczpwdXRWYXIoJ1xcXCIgKyB2YXJpICsgXFxcIicsICdcXFwiICsgaSArIFxcXCInKTtyZWZyZXNoUGFnZShmYWxzZSk7J3RvYXN0Oi8v5YiH5o+b5oiQ5Yqf77yBJzsnI25vSGlzdG9yeSNoaWtlcjovL2VtcHR5J1xcXCI7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBnZXRWYXIodmFyaSwgJzAnKSA9PSBpID8gJ+KAmOKAmOKAmeKAmTxiPjxzcGFuIHN0eWxlPVxcXCJjb2xvcjogI2ZmZmZmZlxcXCI+JyArIHRhYnNbaV0gKyAnPC9zcGFuPjwvYj4nIDogdGFic1tpXSxcXG4gICAgICAgICAgICB1cmw6IHVybCxcXG5cXG4gICAgICAgICAgICBjb2xfdHlwZTogJ3Njcm9sbF9idXR0b24nLFxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kQ29sb3InOiBnZXRWYXIodmFyaSwgJzAnKSA9PSBpID8gZ2V0UmFuZ2VDb2xvcnMoKSA6ICcnXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSlcXG4gICAgfVxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6ICdsaW5lJ30pO1xcblxcdCAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgbG9nKFxcXCJzZXRUYWJz6ZSZ6K+vOiBcXFwiICsgZS50b1N0cmluZygpKTtcXG4gICAgICAgIGQucHVzaCh7IHRpdGxlOiAn5qCH562+55Sf5oiQ5aSx6LSlJywgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIiB9KTtcXG4gICAgfVxcbn1cXG5cXG4gIFxcbi8v5pKt5pS+5YiX6KGoXFxuZnVuY3Rpb24gc2V0TGlzdHMobGlzdHMsIGluZGV4KSB7XFxuICAgdHJ5IHtcXG4gICAgdmFyIGxpc3QgPSBsaXN0c1tpbmRleF07XFxuICAgIGlmIChnZXRWYXIoJ3Noc29ydCcpID09ICcxJykge1xcbiAgICAgICAgdmFyIGxpc3QgPSBsaXN0c1tpbmRleF0ucmV2ZXJzZSgpO1xcbiAgICB9XFxuICAgIGZvciAodmFyIGogaW4gbGlzdCkge1xcblxcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICB0aXRsZTogJ+KAmOKAmOKAmeKAmScgKyBwZGZoKGxpc3Rbal0sICdhJiZUZXh0JylcXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL+esrChcXFxcZCsp6ZuGLywgJyQxJylcXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ+esrCcsICcnKVxcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgn5pyfJywgJycpLnNtYWxsKCksXFxuICAgICAgICAgICAgdXJsOiAgdXJsX3ByZWZpeCtwZGZoKGxpc3Rbal0sICdhJiZocmVmJykrbGF6eSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogbGlzdC5sZW5ndGggPiAzID8gJ3RleHRfNCcgOiAndGV4dF8yJyxcXG4gICAgICAgICAgICAgICB9KTtcXG4gICAgfVxcblxcdCAvLyDlpITnkIbnqbrliJfooajmg4XlhrVcXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xcbiAgICAgICAgICAgIGQucHVzaCh7IHRpdGxlOiAn4oCY4oCY5b2T5YmN5YiG57G75peg5pKt5pS+6aG54oCZ4oCZJywgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIiB9KTtcXG4gICAgICAgIH1cXG4gICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgbG9nKFxcXCJzZXRMaXN0c+mUmeivrzogXFxcIiArIGUudG9TdHJpbmcoKSk7XFxuICAgICAgICBkLnB1c2goeyB0aXRsZTogJ+aSreaUvuWIl+ihqOeUn+aIkOWksei0pScsIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCIgfSk7XFxuICAgIH0gXFxufVxcblxcblxcblxcblxcblxcbnNldFRhYnModGFicywgTVlfVVJMKTtcXG5zZXRMaXN0cyhsaXN0cywgZ2V0VmFyKE1ZX1VSTCwgJzAnKSk7XFxuZC5wdXNoKHtjb2xfdHlwZTogJ2xpbmVfYmxhbmsnfSlcXHRcXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCJsYXp5XCIsXCJwYXRoXCI6XCJsYXp5XCIsXCJydWxlXCI6XCJ2YXIgbGF6eSA9ICQoJycpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgdHJ5IHtcXG4gICAgICAgIGZ1bmN0aW9uIHRvVXJsKHBsYXlVcmwpIHtcXG4gICAgICAgICAgICBpZiAoL21ndHZ8c29odS8udGVzdChwbGF5VXJsKSkge1xcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheVVybCArIFxcXCI7e1VzZXItQWdlbnRATW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMCl9XFxcIjtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKC9iaWxpLy50ZXN0KHBsYXlVcmwpKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBwbGF5VXJsICsgXFxcIjt7VXNlci1BZ2VudEBNb3ppbGxhLzUuMCYmUmVmZXJlckBodHRwczovL3d3dy5iaWxpYmlsaS5jb219XFxcIjtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKC9peGlndWEvLnRlc3QocGxheVVybCkpIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXlVcmwgKyBcXFwiI2lzVmlkZW89dHJ1ZSNcXFwiICsgXFxcIiMubXA0O3tSZWZlcmVyQGh0dHBzOi8vd3d3Lml4aWd1YS5jb20vJiZVc2VyLUFnZW50QE1vemlsbGEvNS4wfVxcXCI7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXlVcmw7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcblxcbiAgICAgICAgdmFyIGh0bWwgPSByZXF1ZXN0KGlucHV0LCB7fSk7XFxuICAgICAgICB2YXIgcGxheWVyX2RhdGEgPSBKU09OLnBhcnNlKGh0bWwubWF0Y2goL3IgcGxheWVyXy4qPz0oLio/KTwvKVsxXSk7XFxuICAgICAgICB2YXIgZnJvID0gcGxheWVyX2RhdGEuZnJvbTtcXG4gICAgICAgIHZhciBwbGF5VXJsID0gcGxheWVyX2RhdGEudXJsO1xcblxcblxcbiAgICAgICAgaWYgKHBsYXllcl9kYXRhLmVuY3J5cHQgPT0gJzEnKSB7XFxuICAgICAgICAgICAgcGxheVVybCA9IHVuZXNjYXBlKHBsYXllcl9kYXRhLnVybCk7XFxuICAgICAgICB9IGVsc2UgaWYgKHBsYXllcl9kYXRhLmVuY3J5cHQgPT0gJzInKSB7XFxuICAgICAgICAgICAgcGxheVVybCA9IHVuZXNjYXBlKGJhc2U2NERlY29kZShwbGF5ZXJfZGF0YS51cmwpKTtcXG4gICAgICAgIH07XFxuICAgICAgICB2YXIgZXhjbHVkZSA9IC9wbGF5bTN1OHxtM3U4XFxcXC50dnxtaW5cXFxcLmNzc3w0MDRcXFxcLm0zdTh8XFxcXC5jc3MvO1xcbiAgICAgICAgdmFyIGNvbnRhaW4gPSAvXFxcXC5tcDR8XFxcXC5tM3U4fFxcXFwuZmx2fFxcXFwuYXZpfFxcXFwubXBlZ3xcXFxcLndtdnxcXFxcLm1vdnxcXFxcLnJtdmJ8XFxcXC5kYXR8cXFCRmRvd25sb2FkfG1pbWU9dmlkZW8lMkZ8dmlkZW9fbXA0LztcXG4gICAgICAgIGlmICghZXhjbHVkZS50ZXN0KHBsYXlVcmwpICYmIGNvbnRhaW4udGVzdChwbGF5VXJsKSkge1xcbiAgICAgICAgICAgIHJldHVybiB0b1VybChwbGF5VXJsKTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIHZhciBqeFVybCA9ICcnO1xcbiAgICAgICAgdmFyIGp4SHRtbCA9IHJlcXVlc3QoanhVcmwsIHtcXG4gICAgICAgICAgICBoZWFkZXJzOiB7XFxuICAgICAgICAgICAgICAgIFxcXCJVc2VyLUFnZW50XFxcIjogXFxcIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjApXFxcIlxcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgbWV0aG9kOiBcXFwiR0VUXFxcIlxcbiAgICAgICAgfSk7XFxuICAgICAgICBldmFsKGp4SHRtbC5tYXRjaCgvdmFyIGNvbmZpZyA9IHtbXFxcXHNcXFxcU10qP30vKVswXSArIFxcXCJcXFwiKTtcXG4gICAgICAgIHZhciBhcGlVcmwgPSAnJztcXG4gICAgICAgIHZhciBhcGlIdG1sID0gcmVxdWVzdChhcGlVcmwsIHtcXG4gICAgICAgICAgICBoZWFkZXJzOiB7XFxuICAgICAgICAgICAgICAgIFxcXCJVc2VyLUFnZW50XFxcIjogXFxcIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjApXFxcIlxcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgYm9keTogXFxcInVybD1cXFwiICsgY29uZmlnLnVybCArIFxcXCImdGltZT1cXFwiICsgY29uZmlnLnRpbWUgKyBcXFwiJmtleT1cXFwiICsgY29uZmlnLmtleSxcXG4gICAgICAgICAgICBtZXRob2Q6IFxcXCJQT1NUXFxcIlxcbiAgICAgICAgfSk7XFxuICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UoYXBpSHRtbCk7XFxuICAgICAgICBpZiAoanNvbi5jb2RlID09IDIwMCkge1xcbiAgICAgICAgICAgIHBsYXlVcmwgPSBqc29uLnVybDtcXG4gICAgICAgICAgICByZXR1cm4gdG9VcmwocGxheVVybCk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIHJldHVybiAndG9hc3Q6Ly8nICsganNvbi5tc2c7XFxuICAgICAgICB9XFxuXFxuICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgIC8vc2V0RXJyb3IoZSk7XFxuICAgICAgICBzaG93TG9hZGluZyhcXFwi5q2j5Zyo6L+b6KGM5qOA57Si77yM6K+356iN5YCZLi4uXFxcIik7XFxuICAgICAgICB2YXIgdmlkZW8gPSAneDVSdWxlOi8vJyArIGlucHV0ICsgJ0AnICsgJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgLy9mYmEubG9nKGZiYS5nZXRVcmxzKCkpXFxuICAgICAgICAgICAgdmFyIHVybHMgPSBfZ2V0VXJscygpXFxuICAgICAgICAgICAgdmFyIGV4Y2x1ZGUgPSAvcGxheW0zdTh8bTN1OFxcXFwudHZ8bWluXFxcXC5jc3N8NDA0XFxcXC5tM3U4fFxcXFwuY3NzLztcXG4gICAgICAgICAgICB2YXIgY29udGFpbiA9IC9cXFxcLm1wNHxcXFxcLm0zdTh8XFxcXC5mbHZ8XFxcXC5hdml8XFxcXC5tcGVnfFxcXFwud212fFxcXFwubW92fFxcXFwucm12YnxcXFxcLmRhdHxxcUJGZG93bmxvYWR8bWltZT12aWRlbyUyRnx2aWRlb19tcDQvO1xcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdXJscykge1xcbiAgICAgICAgICAgICAgICBpZiAoIWV4Y2x1ZGUudGVzdCh1cmxzW2ldKSAmJiBjb250YWluLnRlc3QodXJsc1tpXSkpIHtcXG4gICAgICAgICAgICAgICAgICAgIC8vIGZ5X2JyaWRnZV9hcHAubG9nKHVybHNbaV0pXFxuICAgICAgICAgICAgICAgICAgICBpZiAoL21ndHZ8c29odS8udGVzdCh1cmxzW2ldKSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmxzW2ldICsgXFxcIjt7VXNlci1BZ2VudEBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wKX1cXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvYmlsaS8udGVzdCh1cmxzW2ldKSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmxzW2ldICsgXFxcIjt7VXNlci1BZ2VudEBNb3ppbGxhLzUuMCYmUmVmZXJlckBodHRwczovL3d3dy5iaWxpYmlsaS5jb219XFxcIjtcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL2l4aWd1YS8udGVzdCh1cmxzW2ldKSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmxzW2ldICsgXFxcIiNpc1ZpZGVvPXRydWUjXFxcIiArIFxcXCIjLm1wNDt7UmVmZXJlckBodHRwczovL3d3dy5peGlndWEuY29tLyYmVXNlci1BZ2VudEBNb3ppbGxhLzUuMH1cXFwiO1xcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsc1tpXVxcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSk7XFxuICAgICAgICByZXR1cm4gdmlkZW87XFxuICAgIH1cXG59KTtcIn1dIiwiaWNvbiI6Imhpa2VyOi8vaW1hZ2VzL2hvbWVfaWNvbl9jb2RlIiwicHJveHkiOiIifQ==